{"mappings":"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","sources":["node_modules/uuid/dist/esm-browser/rng.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-faa4c92f7cb6e949.js","node_modules/uuid/dist/esm-browser/regex.js","node_modules/uuid/dist/esm-browser/validate.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/v4.js","src/utils/EventBus.ts","src/utils/Block.ts","src/pages/reg/reg.pug","src/components/Button/button.pug","src/components/Button/index.ts","src/components/Button/Button.ts","src/components/Input/index.ts","src/components/Input/Input.ts","src/components/Form/index.ts","src/components/Form/Form.ts","src/components/MainForm/mainForm.pug","src/components/MainForm/index.ts","src/components/MainForm/MainForm.ts","src/components/Identification/identification.pug","src/components/Identification/index.ts","src/components/Identification/Identification.ts","src/components/Helper/helper.pug","src/components/Helper/index.ts","src/components/Helper/Helper.ts","src/utils/Route.ts","src/utils/Router.ts","src/utils/base-api.ts","src/utils/HTTP.ts","src/api/auth-api.ts","src/store/actrionCreaters/setAuthError.ts","src/store/actrionCreaters/setProfile.ts","src/store/actrionCreaters/setRegError.ts","src/utils/Store.ts","src/services/AuthService.ts","src/utils/isEqual.ts","src/utils/memoize.ts","src/store/selectors/selectRegError.ts","src/pages/reg/Reg.ts","src/pages/auth/auth.pug","src/store/selectors/selectAuthError.ts","src/pages/auth/Auth.ts","src/api/chats-api.ts","src/store/actrionCreaters/setActiveChatId.ts","src/store/actrionCreaters/setChatAvatar.ts","src/store/actrionCreaters/setChatNamePopUpDisable.ts","src/store/actrionCreaters/setChats.ts","src/store/selectors/selectActiveChat.ts","src/store/selectors/selectProfile.ts","src/store/selectors/checkChatRoot.ts","src/store/selectors/selectChat.ts","src/store/actrionCreaters/addNewMessages.ts","src/store/actrionCreaters/addOldMessages.ts","src/services/MessagesService.ts","src/services/ChatsService.ts","src/components/ChatItem/chatItem.pug","src/components/ChatItem/index.ts","src/components/ChatItem/ChatItem.ts","src/components/ProfileButton/profileButton.pug","src/components/ProfileButton/index.ts","src/components/ProfileButton/ProfileButton.ts","src/components/ChatsList/chatsList.pug","src/store/selectors/selectChats.ts","src/store/actrionCreaters/setChatNamePopUpActive.ts","src/utils/transformDate.ts","src/components/ChatBar/chatsBar.pug","src/components/ChatBar/index.ts","src/components/ChatBar/ChatsBar.ts","node_modules/@parcel/runtime-js/lib/runtime-02c91a2328d27c91.js","src/utils/getAvatar.ts","src/components/ChatsList/index.ts","src/components/ChatsList/ChatsList.ts","src/pages/chat/chat.pug","src/components/ChatWindow/chatWindow.pug","src/components/CreateMessege/createMessege.pug","src/components/CreateMessege/index.ts","src/components/CreateMessege/CreateMessege.ts","src/store/selectors/selectMessages.ts","src/components/MessagesList/messagesList.pug","src/components/Message/message.pug","src/components/Message/index.ts","src/components/Message/Message.ts","src/components/MessagesList/index.ts","src/components/MessagesList/MessagesList.ts","src/api/members-api.ts","src/store/actrionCreaters/setChatSettingsPopUpActive.ts","src/store/actrionCreaters/setMembers.ts","src/services/MembersService.ts","src/components/Icon/index.ts","src/components/Icon/Icon.ts","src/components/ChatWindow/index.ts","src/components/ChatWindow/ChatWindow.ts","src/components/PopUp/popUp.pug","src/components/PopUp/index.ts","src/components/PopUp/PopUp.ts","src/components/CreateChat/createChat.pug","src/components/CreateChat/index.ts","src/components/CreateChat/CreateChat.ts","src/store/selectors/selectCreateChatPopUpVisible.ts","src/store/actrionCreaters/setChatSettingsPopUpDisable.ts","src/store/selectors/selectChatSettingPopUpVisible.ts","src/api/user-api.ts","src/store/actrionCreaters/clearPasswordError.ts","src/store/actrionCreaters/clearProfileError.ts","src/store/actrionCreaters/setPasswordError.ts","src/store/actrionCreaters/setProfileError.ts","src/store/actrionCreaters/setSearchUsers.ts","src/store/selectors/selectSearchUsers.ts","src/services/UsersService.ts","src/store/selectors/selectMembersWithUsers.ts","src/components/ChatSettingsUsers/chatSettingsUsers.pug","src/components/ChatSettingsUsers/index.ts","src/components/ChatSettingsUsers/ChatSettingsUsers.ts","src/components/ChatSettings/chatSettings.pug","src/components/MemberItom/memberItom.pug","src/components/MemberItom/index.ts","src/components/MemberItom/MemberItom.ts","src/components/InputFile/inputFile.pug","src/components/InputFile/index.ts","src/components/InputFile/InputFile.ts","src/components/AvatarChanger/avatarChanger.pug","src/components/AvatarChanger/index.ts","src/components/AvatarChanger/AvatarChanger.ts","src/components/ChatSettings/index.ts","src/components/ChatSettings/ChatSettings.ts","src/pages/chat/Chat.ts","src/pages/profile/profile.pug","src/store/selectors/selectPasswordError.ts","src/store/selectors/selectProfileError.ts","src/components/ProfileEditor/profileEditor.pug","src/components/ProfileEditor/index.ts","src/components/ProfileEditor/ProfileEditor.ts","src/pages/profile/index.ts","src/pages/profile/Profile.ts","src/store/reducers/popUpReducer.ts","src/store/reducers/chatsReducer.ts","src/store/reducers/currentChatReducer.ts","src/store/reducers/searchUsersReducer.ts","src/store/reducers/profileReducer.ts","src/store/reducers/errorsReducer.ts","src/store/createStore.ts","src/index.ts"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"chac8\\\":\\\"404.09282a38.js\\\",\\\"9fssg\\\":\\\"avatar.d36d91cd.jpg\\\"}\"));","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","type Listener = Array<(...args: any[]) => {} | null>;\r\n\r\ntype Listeners = {\r\n  [index: string]: Listener;\r\n};\r\n\r\nclass EventBus {\r\n  listeners: Listeners;\r\n\r\n  constructor() {\r\n    this.listeners = {};\r\n  }\r\n\r\n  on(event: string, callback: () => {}): void {\r\n    if (!this.listeners[event]) {\r\n      this.listeners[event] = [];\r\n    }\r\n\r\n    this.listeners[event].push(callback);\r\n  }\r\n\r\n  off(event: string, callback: () => {}) {\r\n    if (!this.listeners[event]) {\r\n      throw new Error(` : ${event}`);\r\n    }\r\n\r\n    this.listeners[event] = this.listeners[event].filter(\r\n      (listener) => listener !== callback,\r\n    );\r\n  }\r\n\r\n  emit(event: string, ...args: any[]) {\r\n    if (!this.listeners[event]) {\r\n      throw new Error(` : ${event}`);\r\n    }\r\n    this.listeners[event].forEach((listener) => {\r\n      listener(...args);\r\n    });\r\n  }\r\n}\r\n\r\nexport default EventBus;\r\n","/* eslint-disable class-methods-use-this */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport { v4 as makeUUID } from 'uuid';\r\nimport Attrs from '../types/Attrs';\r\nimport Events from '../types/Events';\r\nimport Props from '../types/Props';\r\nimport EventBus from './EventBus';\r\n\r\ntype BlockMeta = {\r\n  tagName: string;\r\n  props: Props;\r\n  attrs: Attrs;\r\n};\r\n\r\nclass Block {\r\n  public meta: BlockMeta;\r\n\r\n  public props: Props;\r\n\r\n  public attrs: Attrs;\r\n\r\n  public components: { [index: string]: Block } | undefined;\r\n\r\n  public eventBus: () => EventBus;\r\n\r\n  public id: string;\r\n\r\n  private elementIn: HTMLElement;\r\n\r\n  static EVENTS = {\r\n    INIT: 'init',\r\n    FLOW_CDM: 'flow:component-did-mount',\r\n    FLOW_CDU: 'flow:component-did-update',\r\n    FLOW_RENDER: 'flow:render',\r\n  };\r\n\r\n  constructor(tagName: string = 'div', attrs: Attrs = {}, props: Props = {}) {\r\n    const eventBus = new EventBus();\r\n    this.meta = {\r\n      tagName,\r\n      props,\r\n      attrs,\r\n    };\r\n    this.id = makeUUID();\r\n    const propsWithThis = { ...props };\r\n    if (propsWithThis.events) {\r\n      propsWithThis.events = this.bindBlockToEvents(propsWithThis.events);\r\n    }\r\n    this.props = this.makePropsProxy(propsWithThis);\r\n    this.attrs = attrs;\r\n    this.eventBus = () => eventBus;\r\n    this.registerEvents(eventBus);\r\n    eventBus.emit(Block.EVENTS.INIT);\r\n  }\r\n\r\n  private registerEvents(eventBus: EventBus) {\r\n    eventBus.on(Block.EVENTS.INIT, this.init.bind(this));\r\n    eventBus.on(Block.EVENTS.FLOW_CDM, this.componentDidMountIn.bind(this));\r\n    eventBus.on(Block.EVENTS.FLOW_CDU, this.componentDidUpdateIn.bind(this));\r\n    eventBus.on(Block.EVENTS.FLOW_RENDER, this.renderIn.bind(this));\r\n  }\r\n\r\n  private bindBlockToEvents(events: Events): Events {\r\n    const newEvents: Events = {};\r\n    Object.entries(events).forEach(([event, func]) => {\r\n      newEvents[event] = (e) => {\r\n        func(e, this);\r\n      };\r\n    });\r\n    return newEvents;\r\n  }\r\n\r\n  private makePropsProxy(props: Props) {\r\n    const proxy = new Proxy(props, {\r\n      set: (target, prop: string, val: any) => {\r\n        const old: Props = { ...target };\r\n        if (prop === 'events') {\r\n          // eslint-disable-next-line no-param-reassign\r\n          target[prop] = this.bindBlockToEvents(val);\r\n          return true;\r\n        }\r\n        // eslint-disable-next-line no-param-reassign\r\n        target[prop] = val;\r\n        this.eventBus().emit(Block.EVENTS.FLOW_CDU, old, target);\r\n        return true;\r\n      },\r\n    });\r\n    return proxy;\r\n  }\r\n\r\n  private init() {\r\n    this.createResources();\r\n    this.eventBus().emit(Block.EVENTS.FLOW_CDM);\r\n  }\r\n\r\n  private createResources() {\r\n    const { tagName } = this.meta;\r\n    this.elementIn = document.createElement(tagName);\r\n  }\r\n\r\n  private componentDidMountIn() {\r\n    this.componentDidMount();\r\n    this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\r\n  }\r\n\r\n  private renderBlocks(block: string) {\r\n    const fragment = document.createElement('template');\r\n    fragment.innerHTML = block;\r\n    Object.values(this.props)\r\n      .reduce((blockProps, value) => {\r\n        if (Array.isArray(value) && value.every((v) => v instanceof Block)) {\r\n          return blockProps.concat(value);\r\n        }\r\n        if (value instanceof Block) {\r\n          blockProps.push(value);\r\n        }\r\n        return blockProps;\r\n      }, [])\r\n      .forEach((value: Block) => {\r\n        const stub = fragment.content.querySelector(`[data-uuid=\"${value.id}\"]`);\r\n        if (stub) {\r\n          stub.replaceWith(value.element);\r\n        }\r\n      });\r\n    return fragment.content;\r\n  }\r\n\r\n  private renderIn() {\r\n    const block: string = this.render();\r\n    this.removeEvents();\r\n    this.removeAttrs();\r\n    const content: DocumentFragment = this.renderBlocks(block);\r\n    this.elementIn.innerHTML = '';\r\n    this.elementIn.appendChild(content);\r\n    this.addAttrs();\r\n    this.addEvents();\r\n  }\r\n\r\n  private addAttrs() {\r\n    Object.entries(this.attrs).forEach(([attr, value]) => {\r\n      this.elementIn.setAttribute(attr, value);\r\n    });\r\n  }\r\n\r\n  private removeAttrs() {\r\n    Object.keys(this.attrs).forEach((attr) => {\r\n      this.elementIn.removeAttribute(attr);\r\n    });\r\n  }\r\n\r\n  toString() {\r\n    return `<div data-uuid = ${this.id}></div>`;\r\n  }\r\n\r\n  private removeEvents() {\r\n    if (!this.props.events) {\r\n      return;\r\n    }\r\n    Object.entries(this.props.events).forEach(([eventName, eventFunc]) => {\r\n      this.element.removeEventListener(eventName, eventFunc);\r\n    });\r\n  }\r\n\r\n  private addEvents() {\r\n    if (!this.props.events) {\r\n      return;\r\n    }\r\n    Object.entries(this.props.events).forEach(([eventName, eventFunc]) => {\r\n      this.element.addEventListener(eventName, eventFunc);\r\n    });\r\n  }\r\n\r\n  private componentDidUpdateIn(oldProps: Props, newProps: Props) {\r\n    this.componentDidUpdate(oldProps, newProps);\r\n    if (oldProps !== newProps) {\r\n      this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\r\n    }\r\n  }\r\n\r\n  get element() {\r\n    return this.elementIn;\r\n  }\r\n\r\n  public setProps(nextProps: Props) {\r\n    if (!nextProps) {\r\n      return;\r\n    }\r\n    Object.assign(this.props, nextProps);\r\n  }\r\n\r\n  public render(): string {\r\n    return '';\r\n  }\r\n\r\n  public componentDidMount() {}\r\n\r\n  public componentDidUpdate(_oldProps: Props, _newProps: Props) {}\r\n}\r\nexport default Block;\r\n","include ../../templates/centering/centering\r\n\r\n+centering\r\n  div \r\n    | !{form}","span.button__text !{content}","import Button from './Button';\r\n\r\nexport default Button;\r\n","import BlockEvent from '../../types/BlockEvent';\r\nimport Block from '../../utils/Block';\r\nimport button from './button.pug';\r\n\r\nclass Button extends Block {\r\n  constructor(props: {\r\n    fullWidth?: boolean,\r\n    content: string | Block,\r\n    onclick: BlockEvent,\r\n    theme?: 'link' | 'icon',\r\n  }) {\r\n    super('button', {}, {\r\n      fullWidth: props.fullWidth,\r\n      content: props.content,\r\n      theme: props.theme,\r\n      events: {\r\n        click: props.onclick,\r\n      },\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    let baseClass = 'button';\r\n    if (this.props.fullWidth) {\r\n      baseClass = `${baseClass} button_fullWidth`;\r\n    }\r\n    if (this.props.theme) {\r\n      baseClass = `${baseClass} button_theme_${this.props.theme}`;\r\n    }\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return button(this.props);\r\n  }\r\n}\r\n\r\nexport default Button;\r\n","import Input from './Input';\r\n\r\nexport default Input;\r\n","import Block from '../../utils/Block';\r\nimport Events from '../../types/Events';\r\n\r\nclass Input extends Block {\r\n  constructor(props: {\r\n    placeholder: string,\r\n    name: string,\r\n    type: string,\r\n    fullHeight?: boolean,\r\n    events?: Events,\r\n    validFunc?: (v: string) => boolean\r\n  }) {\r\n    super('input', {\r\n      class: 'input',\r\n      placeholder: props.placeholder,\r\n      name: props.name,\r\n      type: props.type,\r\n    }, {\r\n      events: props.events,\r\n      wrong: false,\r\n      validFunc: props.validFunc,\r\n      fullHeight: props.fullHeight,\r\n      name: props.name,\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    let baseClass = 'input';\r\n    if (this.props.wrong) {\r\n      baseClass = `${baseClass} input_wrong`;\r\n    }\r\n    if (this.props.fullHeight) {\r\n      baseClass = `${baseClass} input_fullHeight`;\r\n    }\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return '';\r\n  }\r\n}\r\n\r\nexport default Input;\r\n","import Form from './Form';\r\n\r\nexport default Form;\r\n","import Block from '../../utils/Block';\r\nimport Button from '../Button';\r\nimport Input from '../Input';\r\n\r\nclass Form<Fields> extends Block {\r\n  constructor(props: {\r\n    fields: Array<{\r\n      placeholder: string,\r\n      name: string,\r\n      validFunc?: (v: string) => boolean,\r\n      type: string,\r\n    }>,\r\n    buttonText: string,\r\n    valid?: boolean,\r\n    error?: string,\r\n    submit: (formObj: Fields) => void,\r\n  }) {\r\n    const fieldsArray: Array<Input> = props.fields\r\n      .map((f) => new Input({\r\n        events: {\r\n          blur: (_e, comp: Input) => {\r\n            this.checkInput(comp);\r\n          },\r\n          focus: (_e, comp: Input) => {\r\n            if (!f.validFunc) {\r\n              return;\r\n            }\r\n            comp.setProps({\r\n              wrong: false,\r\n            });\r\n          },\r\n        },\r\n        validFunc: f.validFunc,\r\n        placeholder: f.placeholder,\r\n        name: f.name,\r\n        type: f.type,\r\n      }));\r\n    super('div', {}, {\r\n      fields: fieldsArray,\r\n      button: new Button({\r\n        content: props.buttonText,\r\n        fullWidth: true,\r\n        onclick: () => {\r\n          const result = this.getFormValues();\r\n          if (!props.valid) {\r\n            props.submit(result);\r\n            return;\r\n          }\r\n          const status = this.checkValidFields();\r\n          if (status) {\r\n            props.submit(result);\r\n          }\r\n        },\r\n      }),\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  checkInput(input: Input) {\r\n    if (!input.props.validFunc) {\r\n      return;\r\n    }\r\n    const element = input.element as HTMLTextAreaElement;\r\n    const result: boolean = input.props.validFunc(element.value);\r\n    if (!result) {\r\n      input.setProps({\r\n        wrong: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  checkValidFields() {\r\n    let statusFields = true;\r\n    this.props.fields.forEach((field: Input) => {\r\n      this.checkInput(field);\r\n      if (field.props.wrong === true) {\r\n        statusFields = false;\r\n      }\r\n    });\r\n    return statusFields;\r\n  }\r\n\r\n  setFormValues(values: Record<string, string>) {\r\n    Object.entries(values).forEach(([name, value]) => {\r\n      const inputBlock: Input = this.props.fields.find((input: Input) => input.props.name === name);\r\n      if (!inputBlock) {\r\n        return;\r\n      }\r\n      const input = inputBlock.element as HTMLInputElement;\r\n      input.value = value;\r\n    });\r\n  }\r\n\r\n  getFormValues() {\r\n    const result = this.props.fields.reduce((sum: Record<string, string>, cur: Input) => {\r\n      const inputName: string = cur.attrs.name;\r\n      const input = cur.element as HTMLInputElement;\r\n      const newSum = {\r\n        ...sum,\r\n        [inputName]: input.value,\r\n      };\r\n      return newSum;\r\n    }, {});\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default Form;\r\n",".main-form_content\r\n  each val in fields ? fields : ['There are no values'] \r\n      | !{val}\r\n.main-form_button\r\n  | !{button}\r\nif error\r\n    .main-form_error #{error}","import MainForm from './MainForm';\r\n\r\nexport default MainForm;\r\n","import Form from '../Form';\r\nimport mainForm from './mainForm.pug';\r\n\r\nclass MainForm<Fields> extends Form<Fields> {\r\n  constructor(props: {\r\n    fields: Array<{\r\n      placeholder: string,\r\n      name: string,\r\n      validFunc?: (v: string) => boolean,\r\n      type: string,\r\n    }>,\r\n    buttonText: string,\r\n    valid?: boolean,\r\n    error?: string,\r\n    submit: (formObj: Fields) => void,\r\n  }) {\r\n    super({\r\n      fields: props.fields,\r\n      buttonText: props.buttonText,\r\n      valid: props.valid,\r\n      error: props.error,\r\n      submit: props.submit,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return mainForm({\r\n      button: this.props.button,\r\n      fields: this.props.fields,\r\n      error: this.props.error,\r\n    });\r\n  }\r\n}\r\n\r\nexport default MainForm;\r\n",".identification\r\n  .identification_body\r\n    .identification_title\r\n      | #{title}\r\n    .identification_form\r\n      | !{form}\r\n  .identification_helper\r\n    | !{helper}","import Identification from './Identification';\r\n\r\nexport default Identification;\r\n","import Block from '../../utils/Block';\r\nimport Helper from '../Helper';\r\nimport MainForm from '../MainForm';\r\nimport identification from './identification.pug';\r\n\r\nclass Identification<Fields> extends Block {\r\n  constructor(props: {\r\n    title: string,\r\n    form: MainForm<Fields>,\r\n    helper?: Helper,\r\n  }) {\r\n    super('div', {}, {\r\n      title: props.title,\r\n      form: props.form,\r\n      helper: props.helper,\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  render() {\r\n    return identification({\r\n      title: this.props.title,\r\n      form: this.props.form,\r\n      helper: this.props.helper,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Identification;\r\n",".helper\r\n  span.helper__text #{text}  \r\n    span.helper__button !{link}","import Helper from './Helper';\r\n\r\nexport default Helper;\r\n","import BlockEvent from '../../types/BlockEvent';\r\nimport Block from '../../utils/Block';\r\nimport Button from '../Button';\r\nimport identification from './helper.pug';\r\n\r\nclass Helper extends Block {\r\n  constructor(props: {\r\n    text: string,\r\n    textLink: string,\r\n    onclick: BlockEvent,\r\n  }) {\r\n    super('div', {}, {\r\n      text: props.text,\r\n      link: new Button({\r\n        onclick: props.onclick,\r\n        content: props.textLink,\r\n        theme: 'link',\r\n      }),\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  render() {\r\n    return identification({\r\n      text: this.props.text,\r\n      link: this.props.link,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Helper;\r\n","import Block from './Block';\r\n\r\nclass Route {\r\n  public pathname: string;\r\n\r\n  private BlockClass: typeof Block;\r\n\r\n  private block: Block | null;\r\n\r\n  private currentRoot: HTMLElement;\r\n\r\n  constructor(pathname: string, view: typeof Block, currentRoot: HTMLElement) {\r\n    this.pathname = pathname;\r\n    this.BlockClass = view;\r\n    this.block = null;\r\n    this.currentRoot = currentRoot;\r\n  }\r\n\r\n  match(pathname: string) {\r\n    return this.pathname.startsWith(pathname);\r\n  }\r\n\r\n  render() {\r\n    this.block = new this.BlockClass();\r\n    this.currentRoot.innerHTML = '';\r\n    this.currentRoot.appendChild(this.block.element);\r\n  }\r\n}\r\n\r\nexport default Route;\r\n","import Block from './Block';\nimport Route from './Route';\n\nclass Router {\n  private currentRoot: HTMLElement;\n\n  public static instance: Router | undefined;\n\n  public routes: Array<Route>;\n\n  private history: History;\n\n  constructor(currentRoot?: HTMLElement) {\n    if (Router.instance) {\n      return Router.instance;\n    }\n    if (!currentRoot) {\n      throw Error('undefind root node');\n    }\n    this.routes = [];\n    this.history = window.history;\n    this.currentRoot = currentRoot;\n\n    Router.instance = this;\n  }\n\n  use(pathname: string, block: typeof Block) {\n    const route = new Route(pathname, block, this.currentRoot);\n    this.routes.push(route);\n    return this;\n  }\n\n  start() {\n    window.onpopstate = ((e) => {\n      const window = e.target as Window;\n      this.onRoute(window.location.pathname);\n    });\n\n    this.onRoute(window.location.pathname);\n  }\n\n  private onRoute(pathname: string) {\n    const route = this.getRoute(pathname);\n    if (!route) {\n      return;\n    }\n    route.render();\n  }\n\n  go(pathname: string) {\n    this.history.pushState({}, pathname, pathname);\n    this.onRoute(pathname);\n  }\n\n  back() {\n    this.history.back();\n  }\n\n  forward() {\n    this.history.forward();\n  }\n\n  private getRoute(pathname: string) {\n    return this.routes.find((route) => route.match(pathname));\n  }\n}\nexport default Router;\n","abstract class BaseAPI {\n  abstract create?(param: any): Promise<any>;\n\n  abstract request?(param: any): Promise<any>;\n\n  abstract update?(param: any): Promise<any>;\n\n  abstract delete?(param: any): Promise<any>;\n}\n\nexport default BaseAPI;\n","import RequestOptions from '../types/RequestOptions';\r\n\r\nconst METHODS = {\r\n  GET: 'GET',\r\n  PUT: 'PUT',\r\n  POST: 'POST',\r\n  DELETE: 'DELETE',\r\n};\r\n\r\nclass HTTP {\r\n  private startUrl: string;\r\n\r\n  private timeout: number;\r\n\r\n  private headers: { [index: string]: string };\r\n\r\n  constructor(startUrl: string, options: {\r\n    timeout?: number,\r\n    headers?: { [index: string]: string }\r\n  } = {}) {\r\n    this.startUrl = startUrl;\r\n    this.timeout = options.timeout || 10000;\r\n    this.headers = options.headers || {};\r\n  }\r\n\r\n  get<Response>(url: string) {\r\n    const newUrl = this.startUrl + url;\r\n    return this.request<null, Response>(\r\n      newUrl,\r\n      {\r\n        method: METHODS.GET,\r\n      },\r\n    );\r\n  }\r\n\r\n  put<Request, Response>(url: string, data: Request) {\r\n    return this.request<Request, Response>(\r\n      this.startUrl + url,\r\n      {\r\n        data,\r\n        method: METHODS.PUT,\r\n      },\r\n    );\r\n  }\r\n\r\n  post<Request, Response>(url: string, data?: Request) {\r\n    return this.request<Request, Response>(\r\n      this.startUrl + url,\r\n      {\r\n        data,\r\n        method: METHODS.POST,\r\n      },\r\n    );\r\n  }\r\n\r\n  delete<Request, Response>(url: string, data: Request) {\r\n    return this.request<Request, Response>(\r\n      this.startUrl + url,\r\n      {\r\n        data,\r\n        method: METHODS.DELETE,\r\n      },\r\n    );\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  request<Request, Response>(url: string, options: RequestOptions<Request>): Promise<Response> {\r\n    const {\r\n      method,\r\n      data,\r\n    } = options;\r\n    return new Promise((resolve, reject) => {\r\n      const xhr = new XMLHttpRequest();\r\n\r\n      xhr.open(method, url);\r\n\r\n      Object.entries(this.headers).forEach((v) => xhr.setRequestHeader(...v));\r\n\r\n      xhr.responseType = 'json';\r\n      xhr.onload = () => {\r\n        if (xhr.status < 400) {\r\n          resolve(xhr.response);\r\n        } else {\r\n          reject(xhr.response);\r\n        }\r\n      };\r\n\r\n      xhr.onabort = reject;\r\n      xhr.onerror = reject;\r\n      xhr.timeout = this.timeout;\r\n      xhr.ontimeout = reject;\r\n      xhr.withCredentials = true;\r\n\r\n      if (method === METHODS.GET || !data) {\r\n        xhr.send();\r\n      } else if (!(data instanceof FormData)) {\r\n        xhr.setRequestHeader('Content-Type', 'application/json');\r\n        xhr.send(JSON.stringify(data));\r\n      } else {\r\n        xhr.send(data);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default HTTP;\r\n","import LoginRequest from '../types/LoginRequest';\r\nimport { Profile, RegUser } from '../types/User';\r\nimport BaseAPI from '../utils/base-api';\r\nimport HTTP from '../utils/HTTP';\r\n\r\nconst authAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/auth');\r\n\r\nclass AuthAPI extends BaseAPI {\r\n  public login(user: LoginRequest) {\r\n    return authAPIInstance.post<LoginRequest, void>('/signin', user);\r\n  }\r\n\r\n  public logout() {\r\n    return authAPIInstance.post<void, void>('/logout');\r\n  }\r\n\r\n  public create(user: RegUser) {\r\n    return authAPIInstance.post<RegUser, { id: number }>('/signup', user);\r\n  }\r\n\r\n  public request() {\r\n    return authAPIInstance.get<Profile>('/user');\r\n  }\r\n\r\n  update: undefined;\r\n\r\n  delete: undefined;\r\n}\r\n\r\nexport default AuthAPI;\r\n","import ApiError from '../../types/ApiError';\r\n\r\nconst setAuthError = (payload: ApiError) => ({\r\n  type: 'errors/SETAUTH',\r\n  payload,\r\n});\r\n\r\nexport default setAuthError;\r\n","import { Profile } from '../../types/User';\r\n\r\nconst setProfile = (profile: Profile) => ({\r\n  type: 'profile/SET',\r\n  payload: profile,\r\n});\r\n\r\nexport default setProfile;\r\n","import ApiError from '../../types/ApiError';\r\n\r\nconst setRegError = (payload: ApiError) => ({\r\n  type: 'errors/SETREG',\r\n  payload,\r\n});\r\n\r\nexport default setRegError;\r\n","import Action from '../types/Action';\r\nimport Listener from './Listener';\r\nimport Reducer from './Reducer';\r\n\r\nclass Store {\r\n  private state: Indexed = {};\r\n\r\n  private listeners: Array<Listener> = [];\r\n\r\n  private reducers: {\r\n    [index: string]: Reducer\r\n  } = {};\r\n\r\n  public addReducer(name: string, reducer: Reducer) {\r\n    this.reducers[name] = reducer;\r\n\r\n    this.dispatch({\r\n      type: '@@INIT',\r\n    });\r\n    return this;\r\n  }\r\n\r\n  public getState() {\r\n    return this.state;\r\n  }\r\n\r\n  public dispatch(action: Action) {\r\n    this.state = this.reducer(action);\r\n\r\n    this.emitListeners();\r\n  }\r\n\r\n  private emitListeners() {\r\n    this.listeners.forEach((listener) => listener(this.state));\r\n  }\r\n\r\n  public subscribe(listener: Listener) {\r\n    listener(this.state);\r\n    this.listeners.push(listener);\r\n  }\r\n\r\n  private reducer(action: Action) {\r\n    const newState: Indexed = {};\r\n    Object.entries(this.reducers).forEach(([key, reducer]) => {\r\n      newState[key] = reducer(this.state[key], action);\r\n    });\r\n\r\n    return newState;\r\n  }\r\n}\r\nexport default new Store();\r\n","import AuthAPI from '../api/auth-api';\r\nimport setAuthError from '../store/actrionCreaters/setAuthError';\r\nimport setProfile from '../store/actrionCreaters/setProfile';\r\nimport setRegError from '../store/actrionCreaters/setRegError';\r\nimport LoginRequest from '../types/LoginRequest';\r\nimport { RegUser } from '../types/User';\r\nimport Router from '../utils/Router';\r\nimport Store from '../utils/Store';\r\n\r\nclass AuthService {\r\n  private api: AuthAPI;\r\n\r\n  constructor() {\r\n    this.api = new AuthAPI();\r\n  }\r\n\r\n  public async login(data: LoginRequest) {\r\n    try {\r\n      await this.api.login(data);\r\n      (new Router()).go('/');\r\n    } catch (error) {\r\n      Store.dispatch(setAuthError(error));\r\n    }\r\n  }\r\n\r\n  public async logout() {\r\n    try {\r\n      await this.api.logout();\r\n      (new Router()).go('/auth/');\r\n    } catch (err) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  public async reg(data: RegUser) {\r\n    try {\r\n      await this.api.create(data);\r\n      (new Router()).go('/');\r\n    } catch (error) {\r\n      Store.dispatch(setRegError(error));\r\n    }\r\n  }\r\n\r\n  public async getProfile() {\r\n    try {\r\n      const user = await this.api.request();\r\n      Store.dispatch(setProfile(user));\r\n    } catch (err) {\r\n      (new Router()).go('/auth/');\r\n    }\r\n  }\r\n\r\n  public async checkNotAuth() {\r\n    const user = await this.api.request();\r\n    (new Router()).go('/');\r\n    Store.dispatch(setProfile(user));\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","type PlainObject<T = any> = {\r\n  [k in string]: T;\r\n};\r\n\r\nfunction isPlainObject(value: unknown): value is PlainObject {\r\n  return (\r\n    typeof value === 'object'\r\n    && value !== null\r\n    && value.constructor === Object\r\n    && Object.prototype.toString.call(value) === '[object Object]'\r\n  );\r\n}\r\n\r\nfunction isArray(value: unknown): value is [] {\r\n  return Array.isArray(value);\r\n}\r\n\r\nfunction isArrayOrObject(value: unknown): value is [] | PlainObject {\r\n  return isPlainObject(value) || isArray(value);\r\n}\r\n\r\nfunction isEqual(lhs: PlainObject, rhs: PlainObject) {\r\n  if (Object.keys(lhs).length !== Object.keys(rhs).length) {\r\n    return false;\r\n  }\r\n\r\n  // eslint-disable-next-line no-restricted-syntax\r\n  for (const [key, value] of Object.entries(lhs)) {\r\n    const rightValue = rhs[key];\r\n    if (isArrayOrObject(value) && isArrayOrObject(rightValue)) {\r\n      if (isEqual(value, rightValue)) {\r\n        // eslint-disable-next-line no-continue\r\n        continue;\r\n      }\r\n      return false;\r\n    }\r\n    if (value !== rightValue) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nexport default isEqual;\r\n","import isEqual from './isEqual';\r\n\r\nconst memoize = <Data = any>(dataFunc: (state: any) => Data, actionFunc: (data: Data) => void) => {\r\n  let memo: Data;\r\n  return (state: any) => {\r\n    const data = dataFunc(state);\r\n    if (!isEqual({ a: data }, { a: memo })) {\r\n      actionFunc(data);\r\n      memo = data;\r\n    }\r\n  };\r\n};\r\n\r\nexport default memoize;\r\n","import ApiError from '../../types/ApiError';\r\n\r\nconst selectRegError = (state: Indexed) => state.errors.reg as ApiError | undefined;\r\n\r\nexport default selectRegError;\r\n","import Block from '../../utils/Block';\r\nimport reg from './reg.pug';\r\nimport MainForm from '../../components/MainForm';\r\nimport Identification from '../../components/Identification';\r\nimport Helper from '../../components/Helper';\r\nimport Router from '../../utils/Router';\r\nimport AuthService from '../../services/AuthService';\r\nimport memoize from '../../utils/memoize';\r\nimport selectRegError from '../../store/selectors/selectRegError';\r\nimport Store from '../../utils/Store';\r\nimport { RegUser } from '../../types/User';\r\n\r\nexport default class AuthPage extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      regForm: new Identification({\r\n        title: '',\r\n        form: new MainForm({\r\n          valid: true,\r\n          buttonText: '',\r\n          fields: [{\r\n            placeholder: '',\r\n            name: 'first_name',\r\n            type: 'text',\r\n            validFunc: (value: string) => /^[-A-Z][-a-z]+$/.test(value),\r\n          }, {\r\n            placeholder: '',\r\n            name: 'second_name',\r\n            type: 'text',\r\n            validFunc: (value: string) => /^[-A-Z][-a-z]+$/.test(value),\r\n          }, {\r\n            placeholder: '',\r\n            name: 'login',\r\n            type: 'text',\r\n            validFunc: (value: string) => /^(?=.*[a-zA-Z_-])[a-zA-Z0-9-_]{3,20}$/.test(value),\r\n          }, {\r\n            placeholder: '',\r\n            name: 'email',\r\n            type: 'text',\r\n            validFunc: (value: string) => /^(?=.*[a-zA-Z_@-])[a-zA-Z_@-]+@[a-zA-Z_-]+\\.[a-zA-Z_-]+$/.test(value),\r\n          }, {\r\n            placeholder: '',\r\n            name: 'phone',\r\n            type: 'text',\r\n            validFunc: (value: string) => /^[\\d/+]\\d{9,14}$/.test(value),\r\n          }, {\r\n            placeholder: '',\r\n            name: 'password',\r\n            type: 'password',\r\n            validFunc: (value: string) => /^(?=.*[A-Z-])(?=.*\\d).{8,40}$/.test(value),\r\n          }],\r\n          submit: (formObj: RegUser) => {\r\n            AuthService.reg(formObj);\r\n          },\r\n        }),\r\n        helper: new Helper({\r\n          text: '  ?',\r\n          onclick: () => {\r\n            (new Router()).go('/auth/');\r\n          },\r\n          textLink: '',\r\n        }),\r\n      }),\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    AuthService.checkNotAuth();\r\n    document.title = '';\r\n    const memoizeErrorMessage = memoize(\r\n      (state) => selectRegError(state),\r\n      (error) => {\r\n        if (!error) {\r\n          return;\r\n        }\r\n        this.props.regForm.props.form.setProps({\r\n          error: error.reason,\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeErrorMessage(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return reg({\r\n      form: this.props.regForm,\r\n    });\r\n  }\r\n}\r\n","include ../../templates/centering/centering\r\n\r\n+centering\r\n  div \r\n    | !{form}","import ApiError from '../../types/ApiError';\r\n\r\nconst selectAuthError = (state: Indexed) => state.errors.auth as ApiError | undefined;\r\n\r\nexport default selectAuthError;\r\n","import Block from '../../utils/Block';\r\nimport auth from './auth.pug';\r\nimport Helper from '../../components/Helper';\r\nimport Identification from '../../components/Identification';\r\nimport MainForm from '../../components/MainForm';\r\nimport AuthService from '../../services/AuthService';\r\nimport LoginRequest from '../../types/LoginRequest';\r\nimport Router from '../../utils/Router';\r\nimport memoize from '../../utils/memoize';\r\nimport selectAuthError from '../../store/selectors/selectAuthError';\r\nimport Store from '../../utils/Store';\r\n\r\nexport default class AuthPage extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      form: new Identification<LoginRequest>({\r\n        title: '',\r\n        form: new MainForm({\r\n          valid: true,\r\n          buttonText: '',\r\n          fields: [{\r\n            placeholder: '',\r\n            name: 'login',\r\n            type: 'text',\r\n          }, {\r\n            placeholder: '',\r\n            name: 'password',\r\n            type: 'password',\r\n          }],\r\n          submit: async (formObj) => {\r\n            await AuthService.login(formObj);\r\n          },\r\n        }),\r\n        helper: new Helper({\r\n          text: ' ?',\r\n          onclick: () => {\r\n            (new Router()).go('/reg/');\r\n          },\r\n          textLink: '',\r\n        }),\r\n      }),\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = '';\r\n    AuthService.checkNotAuth();\r\n    const memoizeErrorMessage = memoize(\r\n      (state) => selectAuthError(state),\r\n      (error) => {\r\n        if (!error) {\r\n          return;\r\n        }\r\n        this.props.form.props.form.setProps({\r\n          error: error.reason,\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeErrorMessage(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return auth({\r\n      form: this.props.form,\r\n    });\r\n  }\r\n}\r\n","import Chat from '../types/Chat';\r\nimport BaseAPI from '../utils/base-api';\r\nimport HTTP from '../utils/HTTP';\r\n\r\nconst chatsAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/chats');\r\n\r\nclass ChatsAPI extends BaseAPI {\r\n  public request() {\r\n    return chatsAPIInstance.get<Array<Chat>>('/');\r\n  }\r\n\r\n  public create(data: { title: string }) {\r\n    return chatsAPIInstance.post<{ title: string }, { id: number }>('/', data);\r\n  }\r\n\r\n  public token(chatId: number) {\r\n    return chatsAPIInstance.post<undefined, { token: string }>(`/token/${chatId}`);\r\n  }\r\n\r\n  public updateAvatar(formData: FormData) {\r\n    return chatsAPIInstance.put<FormData, Chat>('/avatar', formData);\r\n  }\r\n\r\n  update: undefined;\r\n\r\n  delete: undefined;\r\n}\r\n\r\nexport default ChatsAPI;\r\n","const setActiveChatId = (id: number) => ({\r\n  type: 'currentChat/SETACTIVECHATID',\r\n  payload: id,\r\n});\r\n\r\nexport default setActiveChatId;\r\n","const setChatAvatar = (chatId: number, avatar: string | null) => ({\r\n  type: 'chats/SETCHATAVATAR',\r\n  payload: {\r\n    chatId,\r\n    avatar,\r\n  },\r\n});\r\n\r\nexport default setChatAvatar;\r\n","const setChatNamePopUpDisable = () => ({\r\n  type: 'popUp/SETCHATNAMEDISABLE',\r\n});\r\n\r\nexport default setChatNamePopUpDisable;\r\n","import Chat from '../../types/Chat';\r\n\r\nconst setChats = (chats: Array<Chat>) => ({\r\n  type: 'chats/SET',\r\n  payload: chats,\r\n});\r\n\r\nexport default setChats;\r\n","import Chat from '../../types/Chat';\r\n\r\nconst selectActiveChat = (state: Indexed): Chat | undefined => {\r\n  // eslint-disable-next-line max-len\r\n  const activeChat: Chat = state.chats.find((chat: Chat) => chat.id === state.currentChat.activeChatId);\r\n  return activeChat;\r\n};\r\n\r\nexport default selectActiveChat;\r\n","import { Profile } from '../../types/User';\r\n\r\nconst selectProfile = (state: Indexed) => state.profile as Profile | undefined;\r\n\r\nexport default selectProfile;\r\n","import selectActiveChat from './selectActiveChat';\r\nimport selectProfile from './selectProfile';\r\n\r\nconst checkChatRoot = (state: Indexed): boolean => {\r\n  const profile = selectProfile(state);\r\n  const chat = selectActiveChat(state);\r\n  return profile?.id === chat?.created_by;\r\n};\r\n\r\nexport default checkChatRoot;\r\n","import Chat from '../../types/Chat';\r\n\r\nconst selectChat = (state: Indexed, chatId: number): Chat | undefined => {\r\n  const c: Chat = state.chats.find((chat: Chat) => chat.id === chatId);\r\n  return c;\r\n};\r\n\r\nexport default selectChat;\r\n","import Message from '../../types/Message';\r\n\r\nconst addNewMessages = (chatId: number, messages: Array<Message>) => ({\r\n  type: 'chats/ADDNEWMESSAGES',\r\n  payload: {\r\n    chatId,\r\n    messages,\r\n  },\r\n});\r\n\r\nexport default addNewMessages;\r\n","import Message from '../../types/Message';\r\n\r\nconst addOldMessages = (chatId: number, messages: Array<Message>) => ({\r\n  type: 'chats/ADDOLDMESSAGES',\r\n  payload: {\r\n    chatId,\r\n    messages,\r\n  },\r\n});\r\n\r\nexport default addOldMessages;\r\n","import ChatsAPI from '../api/chats-api';\r\nimport addNewMessages from '../store/actrionCreaters/addNewMessages';\r\nimport addOldMessages from '../store/actrionCreaters/addOldMessages';\r\nimport selectActiveChat from '../store/selectors/selectActiveChat';\r\nimport selectProfile from '../store/selectors/selectProfile';\r\nimport Message from '../types/Message';\r\nimport Store from '../utils/Store';\r\n\r\nclass MessagesService {\r\n  private sockets: {\r\n    [key: number]: WebSocket;\r\n  } = {};\r\n\r\n  public async connect(chatId: number) {\r\n    const state = Store.getState();\r\n    const profile = selectProfile(state);\r\n    if (!profile) {\r\n      return;\r\n    }\r\n    const chatsApi = new ChatsAPI();\r\n    const { token } = await chatsApi.token(chatId);\r\n    const socket = new WebSocket(`wss://ya-praktikum.tech/ws/chats/${profile.id}/${chatId}/${token}`);\r\n    this.sockets[chatId] = socket;\r\n    socket.addEventListener('message', (event) => {\r\n      this.get(event.data, chatId);\r\n    });\r\n  }\r\n\r\n  private async get(data: string, chat_id: number) {\r\n    const result: Message = await JSON.parse(data);\r\n    if (result.type === 'message') {\r\n      Store.dispatch(addNewMessages(chat_id, [result]));\r\n    }\r\n    if (Array.isArray(result)) {\r\n      Store.dispatch(addOldMessages(chat_id, result));\r\n    }\r\n  }\r\n\r\n  public send(message: string) {\r\n    if (!message) {\r\n      return;\r\n    }\r\n    const state = Store.getState();\r\n    const chat = selectActiveChat(state);\r\n    if (!chat) {\r\n      return;\r\n    }\r\n    this.sockets[chat.id].send(JSON.stringify({\r\n      content: message,\r\n      type: 'message',\r\n    }));\r\n  }\r\n\r\n  public async getlastMessages(chatId: number, offset: number = 0) {\r\n    this.sockets[chatId].send(JSON.stringify({\r\n      content: offset,\r\n      type: 'get old',\r\n    }));\r\n  }\r\n}\r\n\r\nexport default new MessagesService();\r\n","import ChatsAPI from '../api/chats-api';\r\nimport setActiveChatId from '../store/actrionCreaters/setActiveChatId';\r\nimport setChatAvatar from '../store/actrionCreaters/setChatAvatar';\r\nimport setChatNamePopUpDisable from '../store/actrionCreaters/setChatNamePopUpDisable';\r\nimport setChats from '../store/actrionCreaters/setChats';\r\nimport checkChatRoot from '../store/selectors/checkChatRoot';\r\nimport selectActiveChat from '../store/selectors/selectActiveChat';\r\nimport selectChat from '../store/selectors/selectChat';\r\nimport Store from '../utils/Store';\r\nimport MessagesService from './MessagesService';\r\n\r\nclass ChatsService {\r\n  private api: ChatsAPI;\r\n\r\n  constructor() {\r\n    this.api = new ChatsAPI();\r\n  }\r\n\r\n  public async init() {\r\n    try {\r\n      const chats = await this.api.request();\r\n      Store.dispatch(setChats(chats));\r\n      chats.forEach((chat) => {\r\n        MessagesService.connect(chat.id);\r\n      });\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  public async get(chatId: number) {\r\n    Store.dispatch(setActiveChatId(chatId));\r\n    const state = Store.getState();\r\n    const chat = selectChat(state, chatId);\r\n    if (!chat) {\r\n      return;\r\n    }\r\n    if (!chat.messages || chat.messages.length < 20) {\r\n      const offset = chat.messages ? chat.messages.length : 0;\r\n      MessagesService.getlastMessages(chatId, offset);\r\n    }\r\n  }\r\n\r\n  public async create(data: { title: string }) {\r\n    try {\r\n      await this.api.create(data);\r\n      Store.dispatch(setChatNamePopUpDisable());\r\n      this.init();\r\n    } catch (err) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  public async updateAvatar(avatarFile: File) {\r\n    try {\r\n      const state = Store.getState();\r\n      const chat = selectActiveChat(state);\r\n      if (!chat) {\r\n        return;\r\n      }\r\n      const chatRoot = checkChatRoot(state);\r\n      if (!chatRoot) {\r\n        return;\r\n      }\r\n      const formData = new FormData();\r\n      formData.append('avatar', avatarFile);\r\n      formData.append('chatId', chat.id.toString());\r\n      const newChat = await this.api.updateAvatar(formData);\r\n      Store.dispatch(setChatAvatar(chat.id, newChat.avatar));\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new ChatsService();\r\n",".chat-item__main\r\n  .chat-item__img-container\r\n    img.chat-item__img(src= img)\r\n  .chat-item__content\r\n    p.chat-item__author #{author} \r\n    p.chat-item__message #{message}\r\n.chat-item__meta\r\n    .chat-item__count\r\n      if count !== 0\r\n        .chat-item__count-text #{count}\r\n    p.chat-item__date #{date}","import ChatItem from './ChatItem';\r\n\r\nexport default ChatItem;\r\n","import ChatsService from '../../services/ChatsService';\r\nimport selectActiveChat from '../../store/selectors/selectActiveChat';\r\nimport Block from '../../utils/Block';\r\nimport memoize from '../../utils/memoize';\r\nimport Store from '../../utils/Store';\r\nimport chatItem from './chatItem.pug';\r\n\r\nclass ChatItem extends Block {\r\n  constructor(props: {\r\n    id: number,\r\n    author: string,\r\n    message: string,\r\n    date: string,\r\n    count: number,\r\n    img: string,\r\n  }) {\r\n    super('div', {}, {\r\n      id: props.id,\r\n      author: props.author,\r\n      message: props.message,\r\n      date: props.date,\r\n      count: props.count,\r\n      img: props.img,\r\n      active: false,\r\n      events: {\r\n        click: () => {\r\n          ChatsService.get(this.props.id);\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    let baseClass = 'chat-item';\r\n    if (this.props.active) {\r\n      baseClass = `${baseClass} chat-item_active`;\r\n    }\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const memoizeActiveChat = memoize(\r\n      (state) => selectActiveChat(state),\r\n      (data) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        this.setProps({\r\n          active: this.props.id === data.id,\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeActiveChat(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return chatItem(this.props);\r\n  }\r\n}\r\n\r\nexport default ChatItem;\r\n",".profile-button\r\n  .profile-button__img-container\r\n    img.profile-button__img(src= avatar)\r\n  p.profile-button__name #{name}","import ProfileButton from './ProfileButton';\r\n\r\nexport default ProfileButton;\r\n","import Block from '../../utils/Block';\r\nimport Router from '../../utils/Router';\r\nimport profileButton from './profileButton.pug';\r\n\r\nclass ProfileButton extends Block {\r\n  constructor(props: {\r\n    avatar: string,\r\n    name: string,\r\n    link?: string,\r\n  }) {\r\n    super('div', {}, {\r\n      avatar: props.avatar,\r\n      name: props.name,\r\n      link: props.link,\r\n      events: {\r\n        click: () => {\r\n          if (this.props.link) {\r\n            (new Router()).go(this.props.link);\r\n          }\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return profileButton(this.props);\r\n  }\r\n}\r\n\r\nexport default ProfileButton;\r\n",".chat-list__search !{search}\r\n.chat-list__bar !{chatBar}\r\n.chat-list__footer \r\n  .chat-list__profile !{profile}\r\n  .chat-list__add !{addChatButton} ","import Chat from '../../types/Chat';\r\n\r\nconst selectChats = (state: Indexed) => state.chats as Array<Chat>;\r\n\r\nexport default selectChats;\r\n","const setChatNamePopUpActive = () => ({\r\n  type: 'popUp/SETCHATNAMEACTIVE',\r\n});\r\n\r\nexport default setChatNamePopUpActive;\r\n","const transformDate = (time: string) => {\r\n  const date = new Date(Date.parse(time));\r\n  return `${date.getHours()}:${date.getMinutes()}`;\r\n};\r\n\r\nexport default transformDate;\r\n","each val in chats ? chats : ['There are no values']  \r\n  | !{val}","import ChatsBar from './ChatsBar';\r\n\r\nexport default ChatsBar;\r\n","import Block from '../../utils/Block';\r\nimport ChatItem from '../ChatItem';\r\nimport chatsBar from './chatsBar.pug';\r\n\r\nclass ChatsBar extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      chats: [],\r\n      searchValue: '',\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const chats = this.props.chats\r\n      .filter((chat: ChatItem) => chat.props.author.startsWith(this.props.searchValue));\r\n    return chatsBar({\r\n      chats,\r\n    });\r\n  }\r\n}\r\n\r\nexport default ChatsBar;\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9fssg\")).toString();","import imageURL from '../../static/img/avatar.jpg';\r\n\r\nconst getAvatar = (link: string | undefined | null) => (link ? `https://ya-praktikum.tech/api/v2/resources${link}` : imageURL);\r\n\r\nexport default getAvatar;\r\n","import ChatsList from './ChatsList';\r\n\r\nexport default ChatsList;\r\n","import Block from '../../utils/Block';\r\nimport ChatItem from '../ChatItem';\r\nimport Input from '../Input';\r\nimport ProfileButton from '../ProfileButton';\r\nimport chatsList from './chatsList.pug';\r\nimport Button from '../Button';\r\nimport Store from '../../utils/Store';\r\nimport selectChats from '../../store/selectors/selectChats';\r\nimport setChatNamePopUpActive from '../../store/actrionCreaters/setChatNamePopUpActive';\r\nimport memoize from '../../utils/memoize';\r\nimport transformDate from '../../utils/transformDate';\r\nimport selectProfile from '../../store/selectors/selectProfile';\r\nimport ChatsBar from '../ChatBar';\r\nimport getAvatar from '../../utils/getAvatar';\r\n\r\nclass ChatsList extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      chatBar: new ChatsBar(),\r\n      search: new Input({\r\n        placeholder: '  ',\r\n        name: 'search',\r\n        type: 'text',\r\n        events: {\r\n          input: (e: KeyboardEvent) => {\r\n            if (!e.target) {\r\n              return;\r\n            }\r\n            const input = e.target as HTMLInputElement;\r\n            this.props.chatBar.setProps({\r\n              searchValue: input.value,\r\n            });\r\n          },\r\n        },\r\n      }),\r\n      addChatButton: new Button({\r\n        content: ' ',\r\n        onclick: () => {\r\n          Store.dispatch(setChatNamePopUpActive());\r\n        },\r\n      }),\r\n      profile: new ProfileButton({\r\n        avatar: '',\r\n        link: '/profile/',\r\n        name: '',\r\n      }),\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'chat-list';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const memoizeSelectChats = memoize(\r\n      (state) => selectChats(state),\r\n      (data) => {\r\n        this.props.chatBar.setProps({\r\n          chats: data.map((c) => {\r\n            const lastMessege = c.messages ? c.messages[0] : c.last_message;\r\n            return new ChatItem({\r\n              id: c.id,\r\n              author: c.title,\r\n              message: lastMessege ? lastMessege.content : '  ',\r\n              date: lastMessege ? transformDate(lastMessege.time) : '',\r\n              count: c.unread_count,\r\n              img: getAvatar(c.avatar),\r\n            });\r\n          }),\r\n        });\r\n      },\r\n    );\r\n    const memoizeGetProfile = memoize(\r\n      (state) => selectProfile(state),\r\n      (profile) => {\r\n        if (!profile) {\r\n          return;\r\n        }\r\n        this.props.profile.setProps({\r\n          avatar: getAvatar(profile.avatar),\r\n          name: `${profile.first_name} ${profile.second_name}`,\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeSelectChats(state);\r\n      memoizeGetProfile(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return chatsList(this.props);\r\n  }\r\n}\r\n\r\nexport default ChatsList;\r\n","include ../../templates/centering/centering\r\n\r\n\r\n| !{chatList}\r\n| !{chatWindow}\r\n| !{chatNamePopUp}\r\n| !{chatSettingsPopUp}",".chat-window__header \r\n  .chat-window__profile \r\n    | !{profile}\r\n  .chat-window__settings-button \r\n    | !{chatSettingsButton}\r\n.chat-window__messeges\r\n  | !{messagesList}\r\n.chat-window__input\r\n  | !{message}",".create-message \r\n  .create-message_input !{inputMessage}\r\n  .create-message_button !{sendButton}","import CreateMessege from './CreateMessege';\r\n\r\nexport default CreateMessege;\r\n","import MessgesService from '../../services/MessagesService';\r\nimport Block from '../../utils/Block';\r\nimport Button from '../Button';\r\nimport Input from '../Input';\r\nimport createMessege from './createMessege.pug';\r\n\r\nclass CreateMessege extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      sendButton: new Button({\r\n        content: '',\r\n        onclick: () => this.sendMessage(),\r\n      }),\r\n      inputMessage: new Input({\r\n        placeholder: ' ',\r\n        name: 'message',\r\n        type: 'text',\r\n        fullHeight: true,\r\n      }),\r\n    });\r\n  }\r\n\r\n  sendMessage() {\r\n    const input = this.props.inputMessage.element as HTMLInputElement;\r\n    MessgesService.send(input.value);\r\n    input.value = '';\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', (event) => {\r\n      if (event.key === 'Enter') {\r\n        event.preventDefault();\r\n        this.sendMessage();\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return createMessege(this.props);\r\n  }\r\n}\r\n\r\nexport default CreateMessege;\r\n","import Message from '../../types/Message';\r\nimport selectActiveChat from './selectActiveChat';\r\n\r\nconst selectMessages = (state: Indexed): Array<Message> | undefined => {\r\n  const activeChat = selectActiveChat(state);\r\n  if (!activeChat) {\r\n    return [];\r\n  }\r\n  return activeChat.messages;\r\n};\r\n\r\nexport default selectMessages;\r\n","each val in messages ? messages : ['There are no values']  \r\n  | !{val}",".message_content  #{text}\r\n.message_footer \r\n  .message_author \r\n  .message_date  #{date}","import Message from './Message';\r\n\r\nexport default Message;\r\n","import Block from '../../utils/Block';\r\nimport message from './message.pug';\r\n\r\nclass Message extends Block {\r\n  constructor(props: {\r\n    id: number,\r\n    text: string,\r\n    date: string,\r\n    self: boolean,\r\n  }) {\r\n    super('div', {}, {\r\n      id: props.id,\r\n      text: props.text,\r\n      date: props.date,\r\n      self: props.self,\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    let baseClass = 'message';\r\n    if (this.props.self) {\r\n      baseClass = `${baseClass} message__self`;\r\n    }\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return message(this.props);\r\n  }\r\n}\r\n\r\nexport default Message;\r\n","import MessagesList from './MessagesList';\r\n\r\nexport default MessagesList;\r\n","import selectMessages from '../../store/selectors/selectMessages';\r\nimport Block from '../../utils/Block';\r\nimport memoize from '../../utils/memoize';\r\nimport Store from '../../utils/Store';\r\nimport messagesList from './messagesList.pug';\r\nimport Message from '../Message';\r\nimport selectProfile from '../../store/selectors/selectProfile';\r\nimport transformDate from '../../utils/transformDate';\r\n\r\nclass MessagesList extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      messages: ['dssdf', 'sdfsf'],\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const memoizeMessages = memoize(\r\n      (state) => {\r\n        const messages = selectMessages(state);\r\n        const profile = selectProfile(state);\r\n        return {\r\n          messages,\r\n          profile,\r\n        };\r\n      },\r\n      ({ messages, profile }) => {\r\n        if (!messages || !profile) {\r\n          return;\r\n        }\r\n        this.setProps({\r\n          messages: messages.map((d) => new Message({\r\n            id: d.id,\r\n            text: d.content,\r\n            date: transformDate(d.time),\r\n            self: d.user_id === profile.id,\r\n          })),\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeMessages(state);\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'messages-list';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return messagesList(this.props);\r\n  }\r\n}\r\n\r\nexport default MessagesList;\r\n","import { Member } from '../types/User';\r\nimport BaseAPI from '../utils/base-api';\r\nimport HTTP from '../utils/HTTP';\r\n\r\nconst membersAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/chats/users');\r\n\r\nclass MembersAPI extends BaseAPI {\r\n  public request(chatId: number) {\r\n    const api = new HTTP(`https://ya-praktikum.tech/api/v2/chats/${chatId}/users`);\r\n    return api.get<Array<Member>>('/');\r\n  }\r\n\r\n  public create(param: { userId: number, chatId: number }) {\r\n    return membersAPIInstance.put<{ users: Array<number>, chatId: number }, string>('/', { users: [param.userId], chatId: param.chatId });\r\n  }\r\n\r\n  public delete(param: { userId: number, chatId: number }) {\r\n    return membersAPIInstance.delete<{ users: Array<number>, chatId: number }, string>('/', { users: [param.userId], chatId: param.chatId });\r\n  }\r\n\r\n  update: undefined;\r\n}\r\n\r\nexport default MembersAPI;\r\n","const setChatSettingsPopUpActive = () => ({\r\n  type: 'popUp/SETCHATSETTINGACTIVE',\r\n});\r\n\r\nexport default setChatSettingsPopUpActive;\r\n","import { User } from '../../types/User';\r\n\r\nconst setMembers = (payload: { chatId: number, members: Array<User> }) => ({\r\n  type: 'chats/SETMEMBERS',\r\n  payload,\r\n});\r\n\r\nexport default setMembers;\r\n","import MembersAPI from '../api/members-api';\r\nimport setChatSettingsPopUpActive from '../store/actrionCreaters/setChatSettingsPopUpActive';\r\nimport setMembers from '../store/actrionCreaters/setMembers';\r\nimport selectActiveChat from '../store/selectors/selectActiveChat';\r\nimport Store from '../utils/Store';\r\n\r\nclass MembersService {\r\n  private api: MembersAPI;\r\n\r\n  constructor() {\r\n    this.api = new MembersAPI();\r\n  }\r\n\r\n  public openMembersPopUp() {\r\n    Store.dispatch(setChatSettingsPopUpActive());\r\n    const activeChat = selectActiveChat(Store.getState());\r\n    if (!activeChat) {\r\n      return;\r\n    }\r\n    this.get(activeChat.id);\r\n  }\r\n\r\n  public async get(chatId: number) {\r\n    try {\r\n      const members = await this.api.request(chatId);\r\n      Store.dispatch(setMembers({ chatId, members }));\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  public async add(userId: number) {\r\n    try {\r\n      const chat = selectActiveChat(Store.getState());\r\n      if (!chat) {\r\n        return;\r\n      }\r\n      await this.api.create({ userId, chatId: chat.id });\r\n      this.get(chat.id);\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  public async delete(userId: number) {\r\n    try {\r\n      const chat = selectActiveChat(Store.getState());\r\n      if (!chat) {\r\n        return;\r\n      }\r\n      await this.api.delete({ userId, chatId: chat.id });\r\n      this.get(chat.id);\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new MembersService();\r\n","import Icon from './Icon';\r\n\r\nexport default Icon;\r\n","import Block from '../../utils/Block';\r\n\r\nclass Icon extends Block {\r\n  constructor(props: {\r\n    name: 'plus-square' | 'sliders' | 'trash-2',\r\n  }) {\r\n    super('div', {}, {\r\n      name: props.name,\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = `icon icon_name_${this.props.name}`;\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return '';\r\n  }\r\n}\r\n\r\nexport default Icon;\r\n","import ChatWindow from './ChatWindow';\r\n\r\nexport default ChatWindow;\r\n","import Block from '../../utils/Block';\r\nimport ProfileButton from '../ProfileButton';\r\nimport chatWindow from './chatWindow.pug';\r\nimport imageURL from '../../../static/img/avatar.jpg';\r\nimport Button from '../Button';\r\nimport Store from '../../utils/Store';\r\nimport selectActiveChat from '../../store/selectors/selectActiveChat';\r\nimport CreateMessege from '../CreateMessege';\r\nimport MessagesList from '../MessagesList';\r\nimport MembersService from '../../services/MembersService';\r\nimport Icon from '../Icon';\r\nimport getAvatar from '../../utils/getAvatar';\r\n\r\nclass ChatWindow extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      profile: new ProfileButton({\r\n        avatar: imageURL,\r\n        name: '',\r\n      }),\r\n      chatSettingsButton: new Button({\r\n        content: new Icon({\r\n          name: 'sliders',\r\n        }),\r\n        theme: 'icon',\r\n        onclick: () => MembersService.openMembersPopUp(),\r\n      }),\r\n      message: new CreateMessege(),\r\n      messagesList: new MessagesList(),\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'chat-window';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  componentDidMount() {\r\n    Store.subscribe((state) => {\r\n      const chat = selectActiveChat(state);\r\n      if (!chat) {\r\n        return;\r\n      }\r\n      this.props.profile.setProps({\r\n        avatar: getAvatar(chat.avatar),\r\n        name: chat.title,\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return chatWindow(this.props);\r\n  }\r\n}\r\n\r\nexport default ChatWindow;\r\n",".content !{content}","import PopUp from './PopUp';\r\n\r\nexport default PopUp;\r\n","import BlockEvent from '../../types/BlockEvent';\r\nimport Block from '../../utils/Block';\r\nimport popUp from './popUp.pug';\r\n\r\nclass Button extends Block {\r\n  constructor(props: {\r\n    content: Block,\r\n    disableFunc: BlockEvent,\r\n    active: boolean,\r\n  }) {\r\n    super('div', {}, {\r\n      content: props.content,\r\n      events: {\r\n        mousedown: (e) => {\r\n          if (e.target === e.currentTarget) {\r\n            props.disableFunc();\r\n          }\r\n        },\r\n      },\r\n      active: props.active,\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    let baseClass = 'pop-up';\r\n    if (this.props.active) {\r\n      baseClass = `${baseClass} pop-up_active`;\r\n    } else {\r\n      baseClass = `${baseClass} pop-up_disable`;\r\n    }\r\n\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return popUp(this.props);\r\n  }\r\n}\r\n\r\nexport default Button;\r\n",".create-chat_title  \r\n.create-chat_form \r\n  | !{form}","import CreateChat from './CreateChat';\r\n\r\nexport default CreateChat;\r\n","import ChatsService from '../../services/ChatsService';\r\nimport Block from '../../utils/Block';\r\nimport MainForm from '../MainForm';\r\nimport createChat from './createChat.pug';\r\n\r\nclass CreateChat extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      form: new MainForm<{ name: string }>({\r\n        valid: true,\r\n        buttonText: ' ',\r\n        fields: [{\r\n          placeholder: ' ',\r\n          name: 'name',\r\n          type: 'text',\r\n        }],\r\n        submit: async (formObj) => {\r\n          ChatsService.create({ title: formObj.name });\r\n        },\r\n      }),\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'create-chat';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return createChat(this.props);\r\n  }\r\n}\r\n\r\nexport default CreateChat;\r\n","const selectCreateChatPopUpVisible = (state: Indexed) => state.popUp.chatName as boolean;\r\n\r\nexport default selectCreateChatPopUpVisible;\r\n","const setChatSettingsPopUpDisable = () => ({\r\n  type: 'popUp/SETCHATSETTINGDISABLE',\r\n});\r\n\r\nexport default setChatSettingsPopUpDisable;\r\n","const selectChatSettingPopUpVisible = (state: Indexed) => state.popUp.chatSetting as boolean;\r\n\r\nexport default selectChatSettingPopUpVisible;\r\n","import { Profile, UpdateProfileUser, User } from '../types/User';\r\nimport BaseAPI from '../utils/base-api';\r\nimport HTTP from '../utils/HTTP';\r\n\r\nconst userAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/user');\r\n\r\nclass UsersAPI extends BaseAPI {\r\n  public search(login: string) {\r\n    return userAPIInstance.post<{ login: string }, Array<User>>('/search', { login });\r\n  }\r\n\r\n  public update(user: UpdateProfileUser) {\r\n    return userAPIInstance.put<UpdateProfileUser, Profile>('/profile', user);\r\n  }\r\n\r\n  public updatePassword(pass: {\r\n    oldPassword: string,\r\n    newPassword: string,\r\n  }) {\r\n    return userAPIInstance.put<{\r\n      oldPassword: string,\r\n      newPassword: string,\r\n    }, string>('/password', pass);\r\n  }\r\n\r\n  public updateAvatar(formData: FormData) {\r\n    return userAPIInstance.put<FormData, Profile>('/profile/avatar', formData);\r\n  }\r\n\r\n  create: undefined;\r\n\r\n  request: undefined;\r\n\r\n  delete: undefined;\r\n}\r\n\r\nexport default UsersAPI;\r\n","const clearPasswordError = () => ({\r\n  type: 'errors/CLEARPASSWORD',\r\n});\r\n\r\nexport default clearPasswordError;\r\n","const clearProfileError = () => ({\r\n  type: 'errors/CLEARPROFILE',\r\n});\r\n\r\nexport default clearProfileError;\r\n","import ApiError from '../../types/ApiError';\r\n\r\nconst setPasswordError = (payload: ApiError) => ({\r\n  type: 'errors/SETPASSWORD',\r\n  payload,\r\n});\r\n\r\nexport default setPasswordError;\r\n","import ApiError from '../../types/ApiError';\r\n\r\nconst setProfileError = (payload: ApiError) => ({\r\n  type: 'errors/SETPROFILE',\r\n  payload,\r\n});\r\n\r\nexport default setProfileError;\r\n","import { User } from '../../types/User';\r\n\r\nconst setSearchUsers = (users: Array<User>) => ({\r\n  type: 'searchUsers/SETUSERS',\r\n  payload: users,\r\n});\r\n\r\nexport default setSearchUsers;\r\n","import { User } from '../../types/User';\r\n\r\nconst selectSearchUsers = (state: Indexed) => state.searchUsers as Array<User>;\r\n\r\nexport default selectSearchUsers;\r\n","import UsersAPI from '../api/user-api';\r\nimport clearPasswordError from '../store/actrionCreaters/clearPasswordError';\r\nimport clearProfileError from '../store/actrionCreaters/clearProfileError';\r\nimport setPasswordError from '../store/actrionCreaters/setPasswordError';\r\nimport setProfile from '../store/actrionCreaters/setProfile';\r\nimport setProfileError from '../store/actrionCreaters/setProfileError';\r\nimport setSearchUsers from '../store/actrionCreaters/setSearchUsers';\r\nimport checkChatRoot from '../store/selectors/checkChatRoot';\r\nimport selectSearchUsers from '../store/selectors/selectSearchUsers';\r\nimport { UpdateProfileUser } from '../types/User';\r\nimport Store from '../utils/Store';\r\n\r\nclass UsersService {\r\n  private api: UsersAPI;\r\n\r\n  constructor() {\r\n    this.api = new UsersAPI();\r\n  }\r\n\r\n  public async search(login: string) {\r\n    try {\r\n      const state = Store.getState();\r\n      const chatRoot = checkChatRoot(state);\r\n      if (login.length < 3 || !chatRoot) {\r\n        const searchUsers = selectSearchUsers(state);\r\n        if (searchUsers.length > 0) {\r\n          Store.dispatch(setSearchUsers([]));\r\n        }\r\n        return;\r\n      }\r\n      const users = await this.api.search(login);\r\n      Store.dispatch(setSearchUsers(users));\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  public async updateProfile(user: UpdateProfileUser) {\r\n    try {\r\n      const profile = await this.api.update(user);\r\n      Store.dispatch(setProfile(profile));\r\n      Store.dispatch(clearProfileError());\r\n    } catch (error) {\r\n      Store.dispatch(setProfileError(error));\r\n    }\r\n  }\r\n\r\n  public async updatePassword(user: {\r\n    oldPassword: string,\r\n    newPassword: string,\r\n  }) {\r\n    try {\r\n      await this.api.updatePassword(user);\r\n      Store.dispatch(clearPasswordError());\r\n    } catch (error) {\r\n      Store.dispatch(setPasswordError(error));\r\n    }\r\n  }\r\n\r\n  public async updateAvatar(avatarFile: File) {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('avatar', avatarFile);\r\n      const profile = await this.api.updateAvatar(formData);\r\n      Store.dispatch(setProfile(profile));\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new UsersService();\r\n","import { Member } from '../../types/User';\r\nimport selectActiveChat from './selectActiveChat';\r\nimport selectSearchUsers from './selectSearchUsers';\r\n\r\nfunction selectMembersWithUsers(state: Indexed): Array<Member> {\r\n  const activeChat = selectActiveChat(state);\r\n  if (!activeChat) {\r\n    return [];\r\n  }\r\n  const members = activeChat.members || [];\r\n  const membersId = members.map((mem) => mem.id);\r\n  const searchUsers = selectSearchUsers(state);\r\n  const searchMembers: Array<Member> = searchUsers\r\n    .filter((user) => {\r\n      if (membersId.includes(user.id)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    })\r\n    .map((user) => ({ ...user, role: 'none' }));\r\n  const users = members.concat(searchMembers);\r\n  return users;\r\n}\r\n\r\nexport default selectMembersWithUsers;\r\n",".chat-settings-users\r\n  each val in members ? members : ['There are no values']  \r\n    | !{val}","import ChatSettingsUsers from './ChatSettingsUsers';\r\n\r\nexport default ChatSettingsUsers;\r\n","import Block from '../../utils/Block';\r\nimport MemberItom from '../MemberItom';\r\n\r\nimport chatSettingsUsers from './chatSettingsUsers.pug';\r\n\r\nclass ChatSettingsUsers extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      searchValue: '',\r\n      members: [],\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const members = this.props.members\r\n      .filter((chat: MemberItom) => chat.props.login.startsWith(this.props.searchValue));\r\n    return chatSettingsUsers({\r\n      members,\r\n    });\r\n  }\r\n}\r\n\r\nexport default ChatSettingsUsers;\r\n",".chat-settings_header\r\n  | #{header}\r\n.chat-settings_avatar-changer\r\n  | !{avatarChanger}\r\n.chat-settings_search\r\n  | !{search}\r\n.chat-settings_members\r\n  | !{members}",".member-itom\r\n  .member-itom__profile !{profile}\r\n  .member-itom__button !{button}","import MemberItom from './MemberItom';\r\n\r\nexport default MemberItom;\r\n","import MembersService from '../../services/MembersService';\r\nimport { Member } from '../../types/User';\r\nimport Block from '../../utils/Block';\r\nimport getAvatar from '../../utils/getAvatar';\r\nimport Button from '../Button';\r\nimport Icon from '../Icon';\r\nimport ProfileButton from '../ProfileButton';\r\nimport memberItom from './memberItom.pug';\r\n\r\nconst getManageButton = (role: string, id: number, root: boolean) => {\r\n  if (!root || role === 'admin') {\r\n    return '';\r\n  }\r\n  if (role === 'none') {\r\n    return new Button({\r\n      content: new Icon({\r\n        name: 'plus-square',\r\n      }),\r\n      theme: 'icon',\r\n      onclick: () => MembersService.add(id),\r\n    });\r\n  }\r\n  return new Button({\r\n    content: new Icon({\r\n      name: 'trash-2',\r\n    }),\r\n    theme: 'icon',\r\n    onclick: () => MembersService.delete(id),\r\n  });\r\n};\r\n\r\nclass MemberItom extends Block {\r\n  constructor(props: {\r\n    root: boolean,\r\n    member: Member\r\n  }) {\r\n    super('div', {}, {\r\n      login: props.member.login,\r\n      profile: new ProfileButton({\r\n        avatar: getAvatar(props.member.avatar),\r\n        name: `${props.member.first_name} ${props.member.second_name} (${props.member.login})`,\r\n        link: `/user/${props.member.login}`,\r\n      }),\r\n      button: getManageButton(props.member.role, props.member.id, props.root),\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return memberItom(this.props);\r\n  }\r\n}\r\n\r\nexport default MemberItom;\r\n","span.button__text !{content}","import InputFile from './InputFile';\r\n\r\nexport default InputFile;\r\n","import BlockEvent from '../../types/BlockEvent';\r\nimport Block from '../../utils/Block';\r\nimport inputFile from './inputFile.pug';\r\n\r\nclass InputFile extends Block {\r\n  constructor(props: {\r\n    onchange: BlockEvent,\r\n    accept: string,\r\n    id: string,\r\n  }) {\r\n    super('input', {\r\n      type: 'file',\r\n      accept: props.accept,\r\n      id: props.id,\r\n    }, {\r\n      events: {\r\n        change: props.onchange,\r\n      },\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'input-file';\r\n\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return inputFile(this.props);\r\n  }\r\n}\r\n\r\nexport default InputFile;\r\n","label(for= forId) \r\n  .avatar-changer__img-wrapper\r\n    img.avatar-changer__img(src= avatarLink)\r\n.avatar-changer__input\r\n  | !{input}","import AvatarChanger from './AvatarChanger';\r\n\r\nexport default AvatarChanger;\r\n","import BlockEvent from '../../types/BlockEvent';\r\nimport Block from '../../utils/Block';\r\nimport InputFile from '../InputFile';\r\nimport avatarChanger from './avatarChanger.pug';\r\n\r\nclass AvatarChanger extends Block {\r\n  constructor(props: {\r\n    name: string,\r\n    onchange: BlockEvent,\r\n    avatarLink: string,\r\n  }) {\r\n    super('div', {}, {\r\n      input: new InputFile({\r\n        accept: 'image/*',\r\n        id: props.name,\r\n        onchange: props.onchange,\r\n      }),\r\n      forId: props.name,\r\n      link: props.avatarLink,\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'avatar-changer';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return avatarChanger(this.props);\r\n  }\r\n}\r\n\r\nexport default AvatarChanger;\r\n","import ChatSettings from './ChatSettings';\r\n\r\nexport default ChatSettings;\r\n","import UsersService from '../../services/UsersService';\r\nimport selectActiveChat from '../../store/selectors/selectActiveChat';\r\nimport selectMembersWithUsers from '../../store/selectors/selectMembersWithUsers';\r\nimport Block from '../../utils/Block';\r\nimport memoize from '../../utils/memoize';\r\nimport Store from '../../utils/Store';\r\nimport ChatSettingsUsers from '../ChatSettingsUsers';\r\nimport Input from '../Input';\r\nimport chatSettings from './chatSettings.pug';\r\nimport checkChatRoot from '../../store/selectors/checkChatRoot';\r\nimport MemberItom from '../MemberItom';\r\nimport AvatarChanger from '../AvatarChanger';\r\nimport getAvatar from '../../utils/getAvatar';\r\nimport ChatsService from '../../services/ChatsService';\r\n\r\nclass ChatSettings extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      header: '',\r\n      avatarChanger: new AvatarChanger({\r\n        name: 'avatarChat',\r\n        avatarLink: getAvatar(''),\r\n        onchange: (e) => {\r\n          e?.preventDefault();\r\n          const { files } = e?.target as HTMLInputElement;\r\n          if (!files || !files[0]) {\r\n            return;\r\n          }\r\n          const [file] = files;\r\n          ChatsService.updateAvatar(file);\r\n        },\r\n      }),\r\n      members: new ChatSettingsUsers(),\r\n      search: new Input({\r\n        placeholder: ' ',\r\n        name: 'searchUsers',\r\n        type: 'text',\r\n        events: {\r\n          input: (e: KeyboardEvent) => {\r\n            if (!e.target) {\r\n              return;\r\n            }\r\n            const input = e.target as HTMLInputElement;\r\n            this.props.members.setProps({ searchValue: input.value });\r\n            UsersService.search(input.value);\r\n          },\r\n        },\r\n      }),\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'chat-settings';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const memoizeSetTitle = memoize(\r\n      (state) => selectActiveChat(state),\r\n      (data) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        this.setProps({\r\n          header: data.title,\r\n        });\r\n        this.props.avatarChanger.setProps({\r\n          avatarLink: getAvatar(data.avatar),\r\n        });\r\n      },\r\n    );\r\n    const memoizeUsers = memoize(\r\n      (state) => ({\r\n        members: selectMembersWithUsers(state),\r\n        root: checkChatRoot(state),\r\n      }),\r\n      ({ members, root }) => {\r\n        this.props.members.setProps({\r\n          members: members.map((member) => new MemberItom({ root, member })),\r\n        });\r\n      },\r\n    );\r\n    const memoizeRoot = memoize(\r\n      (state) => checkChatRoot(state),\r\n      (root) => {\r\n        if (!root) {\r\n          this.props.avatarChanger.setProps({\r\n            forId: '',\r\n          });\r\n        } else {\r\n          this.props.avatarChanger.setProps({\r\n            forId: 'avatarChat',\r\n          });\r\n        }\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeSetTitle(state);\r\n      memoizeUsers(state);\r\n      memoizeRoot(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return chatSettings(this.props);\r\n  }\r\n}\r\n\r\nexport default ChatSettings;\r\n","import ChatsList from '../../components/ChatsList';\r\nimport Block from '../../utils/Block';\r\nimport chat from './chat.pug';\r\nimport ChatWindow from '../../components/ChatWindow';\r\nimport PopUp from '../../components/PopUp';\r\nimport Store from '../../utils/Store';\r\nimport setChatNamePopUpDisable from '../../store/actrionCreaters/setChatNamePopUpDisable';\r\nimport CreateChat from '../../components/CreateChat';\r\nimport selectCreateChatPopUpVisible from '../../store/selectors/selectCreateChatPopUpVisible';\r\nimport setChatSettingsPopUpDisable from '../../store/actrionCreaters/setChatSettingsPopUpDisable';\r\nimport selectChatSettingPopUpVisible from '../../store/selectors/selectChatSettingPopUpVisible';\r\nimport ChatSettings from '../../components/ChatSettings';\r\nimport memoize from '../../utils/memoize';\r\nimport AuthService from '../../services/AuthService';\r\nimport ChatsService from '../../services/ChatsService';\r\n\r\nexport default class Chat extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      chatList: new ChatsList(),\r\n      chatWindow: new ChatWindow(),\r\n      chatNamePopUp: new PopUp({\r\n        disableFunc: () => {\r\n          Store.dispatch(setChatNamePopUpDisable());\r\n        },\r\n        content: new CreateChat(),\r\n        active: true,\r\n      }),\r\n      chatSettingsPopUp: new PopUp({\r\n        disableFunc: () => {\r\n          Store.dispatch(setChatSettingsPopUpDisable());\r\n        },\r\n        content: new ChatSettings(),\r\n        active: true,\r\n      }),\r\n    });\r\n  }\r\n\r\n  setClass() {\r\n    const baseClass = 'chat';\r\n    this.attrs.class = baseClass;\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = ' ';\r\n    AuthService.getProfile();\r\n    ChatsService.init();\r\n    const memoizeCreateChat = memoize(\r\n      (state) => selectCreateChatPopUpVisible(state),\r\n      (data) => {\r\n        this.props.chatNamePopUp.setProps({\r\n          active: data,\r\n        });\r\n      },\r\n    );\r\n    const memoizeChatSetting = memoize(\r\n      (state) => selectChatSettingPopUpVisible(state),\r\n      (data) => {\r\n        this.props.chatSettingsPopUp.setProps({\r\n          active: data,\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeCreateChat(state);\r\n      memoizeChatSetting(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    this.setClass();\r\n    return chat({\r\n      chatList: this.props.chatList,\r\n      chatWindow: this.props.chatWindow,\r\n      chatNamePopUp: this.props.chatNamePopUp,\r\n      chatSettingsPopUp: this.props.chatSettingsPopUp,\r\n    });\r\n  }\r\n}\r\n","include ../../templates/centering/centering\r\n\r\n+centering\r\n  div \r\n    | !{form}","import ApiError from '../../types/ApiError';\r\n\r\nconst selectPasswordError = (state: Indexed) => state.errors.password as ApiError | undefined;\r\n\r\nexport default selectPasswordError;\r\n","import ApiError from '../../types/ApiError';\r\n\r\nconst selectProfileError = (state: Indexed) => state.errors.profile as ApiError | undefined;\r\n\r\nexport default selectProfileError;\r\n",".profile-editor\r\n  .profile-editor_body\r\n    .profile-editor_title\r\n      | #{title}\r\n    .profile-editor_avatar\r\n      | !{avatarChanger}\r\n    .profile-editor_dataform\r\n      | !{dataForm}\r\n    .profile-editor_passwordform\r\n      | !{passwordForm}\r\n  .profile-editor_helper\r\n    | !{helper}","import ProfileEditor from './ProfileEditor';\n\nexport default ProfileEditor;\n","import UsersService from '../../services/UsersService';\r\nimport selectPasswordError from '../../store/selectors/selectPasswordError';\r\nimport selectProfile from '../../store/selectors/selectProfile';\r\nimport selectProfileError from '../../store/selectors/selectProfileError';\r\nimport { UpdateProfileUser } from '../../types/User';\r\nimport Block from '../../utils/Block';\r\nimport getAvatar from '../../utils/getAvatar';\r\nimport memoize from '../../utils/memoize';\r\nimport Store from '../../utils/Store';\r\nimport AvatarChanger from '../AvatarChanger';\r\nimport Helper from '../Helper';\r\nimport MainForm from '../MainForm';\r\nimport profileEditor from './profileEditor.pug';\r\n\r\nclass ProfileEditor extends Block {\r\n  constructor(props: {\r\n    title: string,\r\n    helper?: Helper,\r\n  }) {\r\n    super('div', {}, {\r\n      title: props.title,\r\n      avatarChanger: new AvatarChanger({\r\n        name: 'avatar',\r\n        onchange: (e) => {\r\n          e?.preventDefault();\r\n          const { files } = e?.target as HTMLInputElement;\r\n          if (!files || !files[0]) {\r\n            return;\r\n          }\r\n          const [file] = files;\r\n          UsersService.updateAvatar(file);\r\n        },\r\n        avatarLink: getAvatar(''),\r\n      }),\r\n      dataForm: new MainForm({\r\n        valid: true,\r\n        buttonText: ' ',\r\n        fields: [{\r\n          placeholder: '',\r\n          name: 'first_name',\r\n          type: 'text',\r\n          validFunc: (value: string) => /^[-A-Z][-a-z]+$/.test(value),\r\n        }, {\r\n          placeholder: '',\r\n          name: 'second_name',\r\n          type: 'text',\r\n          validFunc: (value: string) => /^[-A-Z][-a-z]+$/.test(value),\r\n        }, {\r\n          placeholder: '',\r\n          name: 'login',\r\n          type: 'text',\r\n          validFunc: (value: string) => /^(?=.*[a-zA-Z_-])[a-zA-Z0-9-_]{3,20}$/.test(value),\r\n        }, {\r\n          placeholder: ' ',\r\n          name: 'display_name',\r\n          type: 'text',\r\n        }, {\r\n          placeholder: '',\r\n          name: 'email',\r\n          type: 'text',\r\n          validFunc: (value: string) => /^(?=.*[a-zA-Z_@-])[a-zA-Z_@-]+@[a-zA-Z_-]+\\.[a-zA-Z_-]+$/.test(value),\r\n        }, {\r\n          placeholder: '',\r\n          name: 'phone',\r\n          type: 'text',\r\n          validFunc: (value: string) => /^[\\d/+]\\d{9,14}$/.test(value),\r\n        }],\r\n        submit: (formObj: UpdateProfileUser) => {\r\n          UsersService.updateProfile(formObj);\r\n        },\r\n      }),\r\n      passwordForm: new MainForm({\r\n        valid: true,\r\n        buttonText: ' ',\r\n        fields: [{\r\n          placeholder: ' ',\r\n          name: 'oldPassword',\r\n          type: 'password',\r\n        }, {\r\n          placeholder: ' ',\r\n          name: 'newPassword',\r\n          type: 'password',\r\n          validFunc: (value: string) => /^(?=.*[A-Z-])(?=.*\\d).{8,40}$/.test(value),\r\n        }],\r\n        submit: (formObj: {\r\n          oldPassword: string,\r\n          newPassword: string,\r\n        }) => {\r\n          UsersService.updatePassword(formObj);\r\n        },\r\n      }),\r\n      helper: props.helper,\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const memoizeProfileError = memoize(\r\n      (state) => selectProfileError(state),\r\n      (error) => {\r\n        this.props.dataForm.setProps({\r\n          error: error ? error.reason : undefined,\r\n        });\r\n      },\r\n    );\r\n    const memoizePasswordError = memoize(\r\n      (state) => selectPasswordError(state),\r\n      (error) => {\r\n        this.props.passwordForm.setProps({\r\n          error: error ? error.reason : undefined,\r\n        });\r\n      },\r\n    );\r\n    const memoizeProfile = memoize(\r\n      (state) => selectProfile(state),\r\n      (profile) => {\r\n        if (!profile) {\r\n          return;\r\n        }\r\n        this.props.avatarChanger.setProps({\r\n          avatarLink: getAvatar(profile.avatar),\r\n        });\r\n        this.props.dataForm.setFormValues({\r\n          first_name: profile.first_name,\r\n          second_name: profile.second_name,\r\n          login: profile.login,\r\n          display_name: profile.display_name,\r\n          email: profile.email,\r\n          phone: profile.phone,\r\n        });\r\n      },\r\n    );\r\n    Store.subscribe((state) => {\r\n      memoizeProfileError(state);\r\n      memoizePasswordError(state);\r\n      memoizeProfile(state);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return profileEditor({\r\n      title: this.props.title,\r\n      dataForm: this.props.dataForm,\r\n      passwordForm: this.props.passwordForm,\r\n      avatarChangeInput: this.props.avatarChangeInput,\r\n      helper: this.props.helper,\r\n      avatarChanger: this.props.avatarChanger,\r\n    });\r\n  }\r\n}\r\n\r\nexport default ProfileEditor;\r\n","import Profile from './Profile';\r\n\r\nexport default Profile;\r\n","import Block from '../../utils/Block';\r\nimport profile from './profile.pug';\r\nimport Helper from '../../components/Helper';\r\nimport AuthService from '../../services/AuthService';\r\nimport ProfileEditor from '../../components/ProfileEditor';\r\n\r\nexport default class Profile extends Block {\r\n  constructor() {\r\n    super('div', {}, {\r\n      regForm: new ProfileEditor({\r\n        title: ' ',\r\n        helper: new Helper({\r\n          text: '',\r\n          onclick: async () => {\r\n            await AuthService.logout();\r\n          },\r\n          textLink: '',\r\n        }),\r\n      }),\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = ' ';\r\n    AuthService.getProfile();\r\n  }\r\n\r\n  render() {\r\n    return profile({\r\n      form: this.props.regForm,\r\n    });\r\n  }\r\n}\r\n","import Reducer from '../../utils/Reducer';\r\n\r\nconst popUpReducer: Reducer<{ [index: string]: boolean }> = (\r\n  state = { chatSetting: false, chatName: false },\r\n  action,\r\n) => {\r\n  switch (action.type) {\r\n    case 'popUp/SETCHATSETTINGACTIVE':\r\n      return { ...state, chatSetting: true };\r\n    case 'popUp/SETCHATSETTINGDISABLE':\r\n      return { ...state, chatSetting: false };\r\n    case 'popUp/SETCHATNAMEACTIVE':\r\n      return { ...state, chatName: true };\r\n    case 'popUp/SETCHATNAMEDISABLE':\r\n      return { ...state, chatName: false };\r\n    case 'popUp/CLOSEALL':\r\n      return Object.keys(state).reduce((res: { [index: string]: boolean }, key) => ({\r\n        ...res,\r\n        [key]: false,\r\n      }), {});\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default popUpReducer;\r\n","import Chat from '../../types/Chat';\r\nimport Reducer from '../../utils/Reducer';\r\n\r\nconst chatsReducer: Reducer<Array<Chat>> = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'chats/SET':\r\n      return action.payload;\r\n    case 'chats/SETMEMBERS':\r\n      return state.map((chat: Chat) => {\r\n        if (chat.id === action.payload.chatId) {\r\n          return {\r\n            ...chat,\r\n            members: action.payload.members,\r\n          };\r\n        }\r\n        return { ...chat };\r\n      });\r\n    case 'chats/ADDNEWMESSAGES':\r\n      return state.map((chat: Chat) => {\r\n        if (chat.id === action.payload.chatId) {\r\n          return {\r\n            ...chat,\r\n            messages: chat.messages\r\n              ? action.payload.messages.concat(chat.messages)\r\n              : action.payload.messages,\r\n          };\r\n        }\r\n        return { ...chat };\r\n      });\r\n    case 'chats/ADDOLDMESSAGES':\r\n      return state.map((chat: Chat) => {\r\n        if (chat.id === action.payload.chatId) {\r\n          return {\r\n            ...chat,\r\n            messages: chat.messages\r\n              ? chat.messages.concat(action.payload.messages)\r\n              : action.payload.messages,\r\n          };\r\n        }\r\n        return { ...chat };\r\n      });\r\n    case 'chats/SETCHATAVATAR':\r\n      return state.map((chat: Chat) => {\r\n        if (chat.id === action.payload.chatId) {\r\n          return {\r\n            ...chat,\r\n            avatar: action.payload.avatar,\r\n          };\r\n        }\r\n        return { ...chat };\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default chatsReducer;\r\n","import Reducer from '../../utils/Reducer';\r\n\r\nconst currentChatReducer: Reducer<{ id: number | undefined }> = (\r\n  state = { id: undefined },\r\n  action,\r\n) => {\r\n  switch (action.type) {\r\n    case 'currentChat/SETACTIVECHATID':\r\n      return { ...state, activeChatId: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default currentChatReducer;\r\n","import { User } from '../../types/User';\r\nimport Reducer from '../../utils/Reducer';\r\n\r\nconst searchUsersReducer: Reducer<Array<User>> = (\r\n  state = [],\r\n  action,\r\n) => {\r\n  switch (action.type) {\r\n    case 'searchUsers/SETUSERS':\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default searchUsersReducer;\r\n","import { Profile } from '../../types/User';\r\nimport Reducer from '../../utils/Reducer';\r\n\r\nconst profileReducer: Reducer<Profile | undefined> = (\r\n  state = undefined,\r\n  action,\r\n) => {\r\n  switch (action.type) {\r\n    case 'profile/SET':\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default profileReducer;\r\n","import ApiError from '../../types/ApiError';\r\nimport Reducer from '../../utils/Reducer';\r\n\r\nconst errorsReducer: Reducer<{\r\n  auth?: ApiError,\r\n  reg?: ApiError,\r\n  profile?: ApiError,\r\n  password?: ApiError,\r\n}> = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'errors/SETAUTH':\r\n      return { ...state, auth: action.payload };\r\n    case 'errors/SETREG':\r\n      return { ...state, reg: action.payload };\r\n    case 'errors/SETPROFILE':\r\n      return { ...state, profile: action.payload };\r\n    case 'errors/CLEARPROFILE':\r\n      return { ...state, profile: undefined };\r\n    case 'errors/SETPASSWORD':\r\n      return { ...state, password: action.payload };\r\n    case 'errors/CLEARPASSWORD':\r\n      return { ...state, password: undefined };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default errorsReducer;\r\n","import Store from '../utils/Store';\r\nimport popUpReducer from './reducers/popUpReducer';\r\nimport chatsReducer from './reducers/chatsReducer';\r\nimport currentChatReducer from './reducers/currentChatReducer';\r\nimport searchUsersReducer from './reducers/searchUsersReducer';\r\nimport profileReducer from './reducers/profileReducer';\r\nimport errorsReducer from './reducers/errorsReducer';\r\n\r\nconst createStore = () => {\r\n  Store\r\n    .addReducer('popUp', popUpReducer)\r\n    .addReducer('chats', chatsReducer)\r\n    .addReducer('currentChat', currentChatReducer)\r\n    .addReducer('searchUsers', searchUsersReducer)\r\n    .addReducer('profile', profileReducer)\r\n    .addReducer('errors', errorsReducer);\r\n};\r\n\r\nexport default createStore;\r\n","import Reg from './pages/reg/Reg';\nimport Auth from './pages/auth/Auth';\nimport Chat from './pages/chat/Chat';\nimport Profile from './pages/profile';\nimport Router from './utils/Router';\nimport createStore from './store/createStore';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  function render(query: string) {\n    const root = document.querySelector(query) as HTMLElement;\n    if (root === null) {\n      return;\n    }\n    createStore();\n    const router = new Router(root);\n    router\n      .use('/', Chat)\n      .use('/auth/', Auth)\n      .use('/reg/', Reg)\n      .use('/profile/', Profile)\n      .start();\n  }\n  /* let page;\n    const path = window.location.pathname;\n    switch (path) {\n      case '/':\n        page = new Reg();\n        break;\n      case '/reg.html':\n        page = new Reg();\n        break;\n      case '/auth.html':\n        page = new Auth();\n        break;\n      case '/chat.html':\n        page = new Chat();\n        break;\n      case '/profile.html':\n        page = new Profile();\n        break;\n      case '/500.html':\n        page = new Error500();\n        break;\n      default:\n        page = new Error404();\n        break;\n    }\n    root.appendChild(page.element); */\n\n  render('.root');\n});\n"],"names":["$0abc1b7f80d63b52$var$getRandomValues","$deb01af824756a5a$export$40339995e8a21591","$deb01af824756a5a$export$357eb1b4f03c1402","$deb01af824756a5a$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$0abc1b7f80d63b52$var$rnds8","Uint8Array","crypto","getRandomValues","bind","msCrypto","$69d4d65d51ca5f8f$export$9099ad97b570f7c","$c6441e4f719b155b$export$9099ad97b570f7c","uuid","test","$b1e778e22ee8f046$var$byteToHex","$b1e778e22ee8f046$var$i","push","toString","substr","$b1e778e22ee8f046$export$9099ad97b570f7c","arr","offset","arguments","undefined","toLowerCase","TypeError","$7424411fb8c16e07$export$9099ad97b570f7c","options","buf","rnds","random","rng","$0abc1b7f80d63b52$export$9099ad97b570f7c","$96104ac7d6a7bc75$export$9099ad97b570f7c","on","event","callback","this","listeners","off","filter","listener","emit","args","forEach","$79d36ba5d9659614$var$Block","registerEvents","eventBus","EVENTS","INIT","init","FLOW_CDM","componentDidMountIn","FLOW_CDU","componentDidUpdateIn","FLOW_RENDER","renderIn","bindBlockToEvents","events","newEvents","entries","func","e","makePropsProxy","props","Proxy","set","target","prop","val","old","createResources","tagName","meta","elementIn","document","createElement","componentDidMount","renderBlocks","block","fragment","innerHTML","values","reduce","blockProps","value","Array","isArray","every","v","concat","stub","content","querySelector","replaceWith","element","render","removeEvents","removeAttrs","appendChild","addAttrs","addEvents","attrs","attr","setAttribute","removeAttribute","eventName","eventFunc","removeEventListener","addEventListener","oldProps","newProps","componentDidUpdate","setProps","nextProps","assign","_oldProps","_newProps","propsWithThis","$79d36ba5d9659614$export$9099ad97b570f7c","$0db1583c59b90805$export$9099ad97b570f7c","locals","pug_interp","pug_html","pug_mixins","locals_for_with","form","attributes","call","$336341df8e144e01$export$9099ad97b570f7c","$aba368f57717867f$export$9099ad97b570f7c","setClass","baseClass","fullWidth","theme","class","super","click","onclick","$c55d75b8fec49f19$export$9099ad97b570f7c","wrong","fullHeight","placeholder","name","type","validFunc","$f995658af23dd85f$export$9099ad97b570f7c","checkInput","input","checkValidFields","statusFields","fields","field","setFormValues","inputBlock","find","getFormValues","sum","cur","map","f","blur","_e","comp","focus","button","buttonText","result","valid","submit","$afa879f24bbf15a1$var$pug_match_html","$afa879f24bbf15a1$export$9099ad97b570f7c","error","$$obj","pug_index0","$$l","a","t","exec","r","c","n","s","index","charCodeAt","substring","$afa879f24bbf15a1$var$pug_escape","$93bc135aa69a9f06$export$9099ad97b570f7c","$1095a92824284ab2$var$pug_match_html","$1095a92824284ab2$export$9099ad97b570f7c","helper","title","$1095a92824284ab2$var$pug_escape","$afd0e3fb7dccf244$export$9099ad97b570f7c","$7927daac37378dce$var$pug_match_html","$7927daac37378dce$export$9099ad97b570f7c","link","text","$7927daac37378dce$var$pug_escape","$dd9a06fe0c8394f4$export$9099ad97b570f7c","textLink","$9870b66b07f405b6$export$9099ad97b570f7c","match","pathname","startsWith","BlockClass","currentRoot","view","$afc538645db1dd8e$var$Router","use","route","routes","start","window","onpopstate","onRoute","location","getRoute","go","history","pushState","back","forward","instance","$afc538645db1dd8e$export$9099ad97b570f7c","$ec757c3517e820df$export$9099ad97b570f7c","$b3d140dc30a974b5$var$METHODS","$b3d140dc30a974b5$export$9099ad97b570f7c","get","url","newUrl","startUrl","request","method","put","data","post","delete","Promise","resolve","reject","xhr","XMLHttpRequest","open","headers","setRequestHeader","responseType","onload","status","response","onabort","onerror","timeout","ontimeout","withCredentials","FormData","send","stringify","$19bb825ae169abb3$var$authAPIInstance","$19bb825ae169abb3$export$9099ad97b570f7c","login","user","logout","create","$ebdb21e220380007$export$9099ad97b570f7c","payload","$0f4e78cfb06a0f33$export$9099ad97b570f7c","profile","$62af8f8f19b8c5dc$export$9099ad97b570f7c","$751f0ec61d8cb274$export$9099ad97b570f7c","addReducer","reducer","reducers","dispatch","getState","state","action","emitListeners","subscribe","newState","key","$005bbbc309cc419e$export$9099ad97b570f7c","api","err","console","log","$a35dd9f801fdfea3$var$isArrayOrObject","constructor","prototype","$a35dd9f801fdfea3$var$isPlainObject","$a35dd9f801fdfea3$var$isArray","$a35dd9f801fdfea3$export$9099ad97b570f7c","$a35dd9f801fdfea3$var$isEqual","lhs","rhs","rightValue","$1113aaf4340c4e7e$export$9099ad97b570f7c","dataFunc","actionFunc","memo","$4c208feb30ed5b79$export$9099ad97b570f7c","errors","reg","$8b25cf64c14e9365$export$9099ad97b570f7c","checkNotAuth","memoizeErrorMessage","regForm","reason","formObj","$c8072853fa28279f$export$9099ad97b570f7c","$20ff4d4190e3ecdc$export$9099ad97b570f7c","auth","$b34df5f6d1c219c2$export$9099ad97b570f7c","async","$c15e10765727cc04$var$chatsAPIInstance","$c15e10765727cc04$export$9099ad97b570f7c","token","chatId","updateAvatar","formData","$b37441bd231a9b13$export$9099ad97b570f7c","$f714812700cc20fa$export$9099ad97b570f7c","avatar","$bf8611845910abf6$export$9099ad97b570f7c","$db55be6cf32b7ffe$export$9099ad97b570f7c","chats","$bdc607a3bc0f8ed4$export$9099ad97b570f7c","chat","currentChat","activeChatId","$6138bb4c947157db$export$9099ad97b570f7c","$11cc176d18dcfb5f$export$9099ad97b570f7c","created_by","$985a19e0506da86b$export$9099ad97b570f7c","$77210f4ecf4e7a61$export$9099ad97b570f7c","messages","$b56a4205e5db5638$export$9099ad97b570f7c","$82ed2351f4178dbc$export$9099ad97b570f7c","chatsApi","socket","WebSocket","sockets","chat_id","message","$d3b5df36f5dac255$export$9099ad97b570f7c","connect","getlastMessages","avatarFile","append","newChat","$8f22e7bd5070cc69$var$pug_escape","$8f22e7bd5070cc69$var$pug_match_html","$8f22e7bd5070cc69$export$9099ad97b570f7c","author","count","date","img","toJSON","indexOf","replace","$8f22e7bd5070cc69$var$pug_attr","$29624a860cee5eda$export$9099ad97b570f7c","active","memoizeActiveChat","$fa72b022138a50ad$var$pug_escape","$fa72b022138a50ad$var$pug_match_html","$fa72b022138a50ad$export$9099ad97b570f7c","$fa72b022138a50ad$var$pug_attr","$791913d76b6b190a$export$9099ad97b570f7c","$904589f4246cf852$export$9099ad97b570f7c","addChatButton","chatBar","search","$c19db8cb7cdb1077$export$9099ad97b570f7c","$d39c959e738b00c2$export$9099ad97b570f7c","$57836ae8672551ec$export$9099ad97b570f7c","time","Date","getHours","getMinutes","$305387cc0b9c5f27$export$9099ad97b570f7c","$d13cb43f503c26b6$export$9099ad97b570f7c","searchValue","$b9dcc40a1b4c53e1$exports","URL","import","$7cb2375d22c2de9e$export$9099ad97b570f7c","$parcel$interopDefault","$5fe95d10c443fc88$export$9099ad97b570f7c","memoizeSelectChats","lastMessege","last_message","unread_count","memoizeGetProfile","first_name","second_name","$276c085ef2679ec9$export$9099ad97b570f7c","chatList","chatNamePopUp","chatSettingsPopUp","chatWindow","$08605875c4b15bdb$export$9099ad97b570f7c","chatSettingsButton","messagesList","$dfa5d8b7bbdc3d34$export$9099ad97b570f7c","inputMessage","sendButton","$f724fddd53d5529d$export$9099ad97b570f7c","sendMessage","preventDefault","$c7e297e71555e2ef$export$9099ad97b570f7c","activeChat","$a7a2e45237f8ea56$export$9099ad97b570f7c","$08b78f878cc5d8e2$var$pug_escape","$08b78f878cc5d8e2$var$pug_match_html","$08b78f878cc5d8e2$export$9099ad97b570f7c","$524287d6e541855d$export$9099ad97b570f7c","self","$2bcbf9aaf4bf99bd$export$9099ad97b570f7c","memoizeMessages","d","user_id","$b3d1b8fba2e0631a$var$membersAPIInstance","$b3d1b8fba2e0631a$export$9099ad97b570f7c","param","users","userId","$7b55dc5075e460b2$export$9099ad97b570f7c","$a0c72e8d2d417d4d$export$9099ad97b570f7c","$d0d9b14215376712$export$9099ad97b570f7c","openMembersPopUp","members","$16751f0c77b29361$export$9099ad97b570f7c","$c65b312295631d1f$export$9099ad97b570f7c","$c071e94e7dc22846$export$9099ad97b570f7c","$ec94aeb173fa5077$export$9099ad97b570f7c","mousedown","currentTarget","disableFunc","$21626941180b0b72$export$9099ad97b570f7c","$83acd79f0b4129ee$export$9099ad97b570f7c","$fcac86abc3bda4db$export$9099ad97b570f7c","popUp","chatName","$0b4b22424016fb8d$export$9099ad97b570f7c","$b1e70a640e0ced0c$export$9099ad97b570f7c","chatSetting","$b8e4c37076c63350$var$userAPIInstance","$b8e4c37076c63350$export$9099ad97b570f7c","update","updatePassword","pass","$dfdc88cf8d10fa70$export$9099ad97b570f7c","$6321ebaa575466c7$export$9099ad97b570f7c","$1781e230542a1def$export$9099ad97b570f7c","$61cff5489beca920$export$9099ad97b570f7c","$50efa4057f6c8c19$export$9099ad97b570f7c","$4a1fa7ec8445acdc$export$9099ad97b570f7c","searchUsers","$603a60328fbe574e$export$9099ad97b570f7c","chatRoot","$0caae6e301d24f4d$export$9099ad97b570f7c","membersId","mem","searchMembers","includes","role","$99698568c9e446d0$export$9099ad97b570f7c","$5f009e1507a32539$export$9099ad97b570f7c","$0ccb12f02d7c7256$var$pug_match_html","$0ccb12f02d7c7256$export$9099ad97b570f7c","avatarChanger","header","$0ccb12f02d7c7256$var$pug_escape","$c770cb8f9a64aad2$export$9099ad97b570f7c","$007b7f7a52cf0cdb$export$9099ad97b570f7c","root","member","add","$219b32cb58d3069b$export$9099ad97b570f7c","$d60962cb2d4d827f$export$9099ad97b570f7c","accept","change","onchange","$4ba1a70e0941a0ad$var$pug_attr","$4ba1a70e0941a0ad$var$pug_match_html","$4ba1a70e0941a0ad$var$pug_escape","$4ba1a70e0941a0ad$export$9099ad97b570f7c","avatarLink","forId","$4b3587538fc68736$export$9099ad97b570f7c","$6831f31e0a66f6df$export$9099ad97b570f7c","memoizeSetTitle","memoizeUsers","memoizeRoot","files","file","$6aa913be642c544a$export$9099ad97b570f7c","getProfile","memoizeCreateChat","memoizeChatSetting","$8584168e0a0ba175$export$9099ad97b570f7c","$c8337912908ceff0$export$9099ad97b570f7c","password","$682ad2d1abe5f246$export$9099ad97b570f7c","$3747d0b33424fb33$var$pug_match_html","$3747d0b33424fb33$export$9099ad97b570f7c","dataForm","passwordForm","$3747d0b33424fb33$var$pug_escape","$3d4c1bd842768608$export$9099ad97b570f7c","memoizeProfileError","memoizePasswordError","memoizeProfile","display_name","email","phone","avatarChangeInput","updateProfile","$c41544155fdfdb68$export$9099ad97b570f7c","$ce62f82472c694a8$export$9099ad97b570f7c","res","$eed142f22361bea7$export$9099ad97b570f7c","$c3851982d0746519$export$9099ad97b570f7c","$c13ce222880dcda5$export$9099ad97b570f7c","$d04cd6216d29ed06$export$9099ad97b570f7c","$bbef99000f08bbef$export$9099ad97b570f7c","$5e1881a33518e209$export$9099ad97b570f7c","query"],"version":3,"file":"404.09282a38.js.map"}