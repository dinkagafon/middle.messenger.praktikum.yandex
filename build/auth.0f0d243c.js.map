{"mappings":"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","sources":["node_modules/uuid/dist/esm-browser/rng.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-f04810e76196a903.js","node_modules/uuid/dist/esm-browser/regex.js","node_modules/uuid/dist/esm-browser/validate.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/v4.js","src/utils/EventBus.ts","src/utils/Block.ts","src/pages/reg/reg.pug","src/components/Button/button.pug","src/components/Button/index.ts","src/components/Button/Button.ts","src/components/Input/index.ts","src/components/Input/Input.ts","src/components/Form/index.ts","src/components/Form/Form.ts","src/components/MainForm/mainForm.pug","src/components/MainForm/index.ts","src/components/MainForm/MainForm.ts","src/components/Identification/identification.pug","src/components/Identification/index.ts","src/components/Identification/Identification.ts","src/components/Helper/helper.pug","src/components/Helper/index.ts","src/components/Helper/Helper.ts","src/utils/Route.ts","src/utils/Router.ts","src/utils/base-api.ts","src/utils/HTTP.ts","src/api/auth-api.ts","src/store/actrionCreaters/setAuthError.ts","src/store/actrionCreaters/setProfile.ts","src/store/actrionCreaters/setRegError.ts","src/utils/Store.ts","src/services/AuthService.ts","src/utils/isEqual.ts","src/utils/memoize.ts","src/store/selectors/selectRegError.ts","src/pages/reg/Reg.ts","src/pages/auth/auth.pug","src/store/selectors/selectAuthError.ts","src/pages/auth/Auth.ts","src/api/chats-api.ts","src/store/actrionCreaters/setActiveChatId.ts","src/store/actrionCreaters/setChatNamePopUpDisable.ts","src/store/actrionCreaters/setChats.ts","src/store/selectors/selectChat.ts","src/store/actrionCreaters/addNewMessages.ts","src/store/actrionCreaters/addOldMessages.ts","src/store/selectors/selectActiveChat.ts","src/store/selectors/selectProfile.ts","src/services/MessagesService.ts","src/services/ChatsService.ts","src/components/ChatItem/chatItem.pug","src/components/ChatItem/index.ts","src/components/ChatItem/ChatItem.ts","src/components/ProfileButton/profileButton.pug","src/components/ProfileButton/index.ts","src/components/ProfileButton/ProfileButton.ts","src/components/ChatsList/chatsList.pug","src/store/selectors/selectChats.ts","src/store/actrionCreaters/setChatNamePopUpActive.ts","src/utils/transformDate.ts","src/components/ChatBar/chatsBar.pug","src/components/ChatBar/index.ts","src/components/ChatBar/ChatsBar.ts","node_modules/@parcel/runtime-js/lib/runtime-02c91a2328d27c91.js","src/utils/getAvatar.ts","src/components/ChatsList/index.ts","src/components/ChatsList/ChatsList.ts","src/pages/chat/chat.pug","src/components/ChatWindow/chatWindow.pug","src/components/CreateMessege/createMessege.pug","src/components/CreateMessege/index.ts","src/components/CreateMessege/CreateMessege.ts","src/store/selectors/selectMessages.ts","src/components/MessagesList/messagesList.pug","src/components/Message/message.pug","src/components/Message/index.ts","src/components/Message/Message.ts","src/components/MessagesList/index.ts","src/components/MessagesList/MessagesList.ts","src/api/members-api.ts","src/store/actrionCreaters/setChatSettingsPopUpActive.ts","src/store/actrionCreaters/setMembers.ts","src/services/MembersService.ts","src/components/Icon/index.ts","src/components/Icon/Icon.ts","src/components/ChatWindow/index.ts","src/components/ChatWindow/ChatWindow.ts","src/components/PopUp/popUp.pug","src/components/PopUp/index.ts","src/components/PopUp/PopUp.ts","src/components/CreateChat/createChat.pug","src/components/CreateChat/index.ts","src/components/CreateChat/CreateChat.ts","src/store/selectors/selectCreateChatPopUpVisible.ts","src/store/actrionCreaters/setChatSettingsPopUpDisable.ts","src/store/selectors/selectChatSettingPopUpVisible.ts","src/api/user-api.ts","src/store/actrionCreaters/clearPasswordError.ts","src/store/actrionCreaters/clearProfileError.ts","src/store/actrionCreaters/setPasswordError.ts","src/store/actrionCreaters/setProfileError.ts","src/store/actrionCreaters/setSearchUsers.ts","src/store/selectors/checkChatRoot.ts","src/store/selectors/selectSearchUsers.ts","src/services/UsersService.ts","src/store/selectors/selectMembersWithUsers.ts","src/components/ChatSettingsUsers/chatSettingsUsers.pug","src/components/ChatSettingsUsers/index.ts","src/components/ChatSettingsUsers/ChatSettingsUsers.ts","src/components/ChatSettings/chatSettings.pug","src/components/MemberItom/memberItom.pug","src/components/MemberItom/index.ts","src/components/MemberItom/MemberItom.ts","src/components/ChatSettings/index.ts","src/components/ChatSettings/ChatSettings.ts","src/pages/chat/Chat.ts","src/pages/profile/profile.pug","src/store/selectors/selectPasswordError.ts","src/store/selectors/selectProfileError.ts","src/components/ProfileEditor/profileEditor.pug","src/components/ProfileEditor/index.ts","src/components/ProfileEditor/ProfileEditor.ts","src/pages/profile/index.ts","src/pages/profile/Profile.ts","src/store/reducers/popUpReducer.ts","src/store/reducers/chatsReducer.ts","src/store/reducers/currentChatReducer.ts","src/store/reducers/searchUsersReducer.ts","src/store/reducers/profileReducer.ts","src/store/reducers/errorsReducer.ts","src/store/createStore.ts","src/index.ts"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"chac8\\\":\\\"auth.0f0d243c.js\\\",\\\"9fssg\\\":\\\"avatar.d36d91cd.jpg\\\"}\"));","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","type Listener = Array<(...args: any[]) => {} | null>;\n\ntype Listeners = {\n  [index: string]: Listener;\n};\n\nclass EventBus {\n  listeners: Listeners;\n\n  constructor() {\n    this.listeners = {};\n  }\n\n  on(event: string, callback: () => {}): void {\n    if (!this.listeners[event]) {\n      this.listeners[event] = [];\n    }\n\n    this.listeners[event].push(callback);\n  }\n\n  off(event: string, callback: () => {}) {\n    if (!this.listeners[event]) {\n      throw new Error(`Нет события: ${event}`);\n    }\n\n    this.listeners[event] = this.listeners[event].filter(\n      (listener) => listener !== callback,\n    );\n  }\n\n  emit(event: string, ...args: any[]) {\n    if (!this.listeners[event]) {\n      throw new Error(`Нет события: ${event}`);\n    }\n    this.listeners[event].forEach((listener) => {\n      listener(...args);\n    });\n  }\n}\n\nexport default EventBus;\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { v4 as makeUUID } from 'uuid';\nimport Attrs from '../types/Attrs';\nimport Events from '../types/Events';\nimport Props from '../types/Props';\nimport EventBus from './EventBus';\n\ntype BlockMeta = {\n  tagName: string;\n  props: Props;\n  attrs: Attrs;\n};\n\nclass Block {\n  public meta: BlockMeta;\n\n  public props: Props;\n\n  public attrs: Attrs;\n\n  public components: { [index: string]: Block } | undefined;\n\n  public eventBus: () => EventBus;\n\n  public id: string;\n\n  private elementIn: HTMLElement;\n\n  static EVENTS = {\n    INIT: 'init',\n    FLOW_CDM: 'flow:component-did-mount',\n    FLOW_CDU: 'flow:component-did-update',\n    FLOW_RENDER: 'flow:render',\n  };\n\n  constructor(tagName: string = 'div', attrs: Attrs = {}, props: Props = {}) {\n    const eventBus = new EventBus();\n    this.meta = {\n      tagName,\n      props,\n      attrs,\n    };\n    this.id = makeUUID();\n    const propsWithThis = { ...props };\n    if (propsWithThis.events) {\n      propsWithThis.events = this.bindBlockToEvents(propsWithThis.events);\n    }\n    this.props = this.makePropsProxy(propsWithThis);\n    this.attrs = attrs;\n    this.eventBus = () => eventBus;\n    this.registerEvents(eventBus);\n    eventBus.emit(Block.EVENTS.INIT);\n  }\n\n  private registerEvents(eventBus: EventBus) {\n    eventBus.on(Block.EVENTS.INIT, this.init.bind(this));\n    eventBus.on(Block.EVENTS.FLOW_CDM, this.componentDidMountIn.bind(this));\n    eventBus.on(Block.EVENTS.FLOW_CDU, this.componentDidUpdateIn.bind(this));\n    eventBus.on(Block.EVENTS.FLOW_RENDER, this.renderIn.bind(this));\n  }\n\n  private bindBlockToEvents(events: Events): Events {\n    const newEvents: Events = {};\n    Object.entries(events).forEach(([event, func]) => {\n      newEvents[event] = (e) => {\n        func(e, this);\n      };\n    });\n    return newEvents;\n  }\n\n  private makePropsProxy(props: Props) {\n    const proxy = new Proxy(props, {\n      set: (target, prop: string, val: any) => {\n        const old: Props = { ...target };\n        if (prop === 'events') {\n          // eslint-disable-next-line no-param-reassign\n          target[prop] = this.bindBlockToEvents(val);\n          return true;\n        }\n        // eslint-disable-next-line no-param-reassign\n        target[prop] = val;\n        this.eventBus().emit(Block.EVENTS.FLOW_CDU, old, target);\n        return true;\n      },\n    });\n    return proxy;\n  }\n\n  private init() {\n    this.createResources();\n    this.eventBus().emit(Block.EVENTS.FLOW_CDM);\n  }\n\n  private createResources() {\n    const { tagName } = this.meta;\n    this.elementIn = document.createElement(tagName);\n  }\n\n  private componentDidMountIn() {\n    this.componentDidMount();\n    this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\n  }\n\n  private renderBlocks(block: string) {\n    const fragment = document.createElement('template');\n    fragment.innerHTML = block;\n    Object.values(this.props)\n      .reduce((blockProps, value) => {\n        if (Array.isArray(value) && value.every((v) => v instanceof Block)) {\n          return blockProps.concat(value);\n        }\n        if (value instanceof Block) {\n          blockProps.push(value);\n        }\n        return blockProps;\n      }, [])\n      .forEach((value: Block) => {\n        const stub = fragment.content.querySelector(`[data-uuid=\"${value.id}\"]`);\n        if (stub) {\n          stub.replaceWith(value.element);\n        }\n      });\n    return fragment.content;\n  }\n\n  private renderIn() {\n    const block: string = this.render();\n    this.removeEvents();\n    this.removeAttrs();\n    const content: DocumentFragment = this.renderBlocks(block);\n    this.elementIn.innerHTML = '';\n    this.elementIn.appendChild(content);\n    this.addAttrs();\n    this.addEvents();\n  }\n\n  private addAttrs() {\n    Object.entries(this.attrs).forEach(([attr, value]) => {\n      this.elementIn.setAttribute(attr, value);\n    });\n  }\n\n  private removeAttrs() {\n    Object.keys(this.attrs).forEach((attr) => {\n      this.elementIn.removeAttribute(attr);\n    });\n  }\n\n  toString() {\n    return `<div data-uuid = ${this.id}></div>`;\n  }\n\n  private removeEvents() {\n    if (!this.props.events) {\n      return;\n    }\n    Object.entries(this.props.events).forEach(([eventName, eventFunc]) => {\n      this.element.removeEventListener(eventName, eventFunc);\n    });\n  }\n\n  private addEvents() {\n    if (!this.props.events) {\n      return;\n    }\n    Object.entries(this.props.events).forEach(([eventName, eventFunc]) => {\n      this.element.addEventListener(eventName, eventFunc);\n    });\n  }\n\n  private componentDidUpdateIn(oldProps: Props, newProps: Props) {\n    this.componentDidUpdate(oldProps, newProps);\n    if (oldProps !== newProps) {\n      this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\n    }\n  }\n\n  get element() {\n    return this.elementIn;\n  }\n\n  public setProps(nextProps: Props) {\n    if (!nextProps) {\n      return;\n    }\n    Object.assign(this.props, nextProps);\n  }\n\n  public render(): string {\n    return '';\n  }\n\n  public componentDidMount() {}\n\n  public componentDidUpdate(_oldProps: Props, _newProps: Props) {}\n}\nexport default Block;\n","include ../../templates/centering/centering\r\n\r\n+centering\r\n  div \r\n    | !{form}","span.button__text !{content}","import Button from './Button';\n\nexport default Button;\n","import BlockEvent from '../../types/BlockEvent';\nimport Block from '../../utils/Block';\nimport button from './button.pug';\n\nclass Button extends Block {\n  constructor(props: {\n    fullWidth?: boolean,\n    content: string | Block,\n    onclick: BlockEvent,\n    theme?: 'link' | 'icon',\n  }) {\n    super('button', {}, {\n      fullWidth: props.fullWidth,\n      content: props.content,\n      theme: props.theme,\n      events: {\n        click: props.onclick,\n      },\n    });\n  }\n\n  setClass() {\n    let baseClass = 'button';\n    if (this.props.fullWidth) {\n      baseClass = `${baseClass} button_fullWidth`;\n    }\n    if (this.props.theme) {\n      baseClass = `${baseClass} button_theme_${this.props.theme}`;\n    }\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return button(this.props);\n  }\n}\n\nexport default Button;\n","import Input from './Input';\n\nexport default Input;\n","import Block from '../../utils/Block';\nimport Events from '../../types/Events';\n\nclass Input extends Block {\n  constructor(props: {\n    placeholder: string,\n    name: string,\n    type: string,\n    fullHeight?: boolean,\n    events?: Events,\n    validFunc?: (v: string) => boolean\n  }) {\n    super('input', {\n      class: 'input',\n      placeholder: props.placeholder,\n      name: props.name,\n      type: props.type,\n    }, {\n      events: props.events,\n      wrong: false,\n      validFunc: props.validFunc,\n      fullHeight: props.fullHeight,\n    });\n  }\n\n  setClass() {\n    let baseClass = 'input';\n    if (this.props.wrong) {\n      baseClass = `${baseClass} input_wrong`;\n    }\n    if (this.props.fullHeight) {\n      baseClass = `${baseClass} input_fullHeight`;\n    }\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return '';\n  }\n}\n\nexport default Input;\n","import Form from './Form';\n\nexport default Form;\n","import Block from '../../utils/Block';\nimport Button from '../Button';\nimport Input from '../Input';\n\nclass Form<Fields> extends Block {\n  constructor(props: {\n    fields: Array<{\n      placeholder: string,\n      name: string,\n      validFunc?: (v: string) => boolean,\n      type: string,\n    }>,\n    buttonText: string,\n    valid?: boolean,\n    error?: string,\n    submit: (formObj: Fields) => void,\n  }) {\n    const fieldsArray: Array<Input> = props.fields\n      .map((f) => new Input({\n        events: {\n          blur: (_e, comp: Input) => {\n            this.checkInput(comp);\n          },\n          focus: (_e, comp: Input) => {\n            if (!f.validFunc) {\n              return;\n            }\n            comp.setProps({\n              wrong: false,\n            });\n          },\n        },\n        validFunc: f.validFunc,\n        placeholder: f.placeholder,\n        name: f.name,\n        type: f.type,\n      }));\n    super('div', {}, {\n      fields: fieldsArray,\n      button: new Button({\n        content: props.buttonText,\n        fullWidth: true,\n        onclick: () => {\n          const result = this.getFormValues();\n          if (!props.valid) {\n            props.submit(result);\n            return;\n          }\n          const status = this.checkValidFields();\n          if (status) {\n            props.submit(result);\n          }\n        },\n      }),\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  checkInput(input: Input) {\n    if (!input.props.validFunc) {\n      return;\n    }\n    const element = input.element as HTMLTextAreaElement;\n    const result: boolean = input.props.validFunc(element.value);\n    if (!result) {\n      input.setProps({\n        wrong: true,\n      });\n    }\n  }\n\n  checkValidFields() {\n    let statusFields = true;\n    this.props.fields.forEach((field: Input) => {\n      this.checkInput(field);\n      if (field.props.wrong === true) {\n        statusFields = false;\n      }\n    });\n    return statusFields;\n  }\n\n  getFormValues() {\n    const result = this.props.fields.reduce((sum: Record<string, string>, cur: Input) => {\n      const inputName: string = cur.attrs.name;\n      const input = cur.element as HTMLInputElement;\n      const newSum = {\n        ...sum,\n        [inputName]: input.value,\n      };\n      return newSum;\n    }, {});\n    return result;\n  }\n}\n\nexport default Form;\n",".main-form_content\r\n  each val in fields ? fields : ['There are no values'] \r\n      | !{val}\r\n.main-form_button\r\n  | !{button}\r\nif error\r\n    .main-form_error #{error}","import MainForm from './MainForm';\n\nexport default MainForm;\n","import Form from '../Form';\nimport mainForm from './mainForm.pug';\n\nclass MainForm<Fields> extends Form<Fields> {\n  constructor(props: {\n    fields: Array<{\n      placeholder: string,\n      name: string,\n      validFunc?: (v: string) => boolean,\n      type: string,\n    }>,\n    buttonText: string,\n    valid?: boolean,\n    error?: string,\n    submit: (formObj: Fields) => void,\n  }) {\n    super({\n      fields: props.fields,\n      buttonText: props.buttonText,\n      valid: props.valid,\n      error: props.error,\n      submit: props.submit,\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  render() {\n    return mainForm({\n      button: this.props.button,\n      fields: this.props.fields,\n      error: this.props.error,\n    });\n  }\n}\n\nexport default MainForm;\n",".identification\r\n  .identification_body\r\n    .identification_title\r\n      | #{title}\r\n    .identification_form\r\n      | !{form}\r\n  .identification_helper\r\n    | !{helper}","import Identification from './Identification';\n\nexport default Identification;\n","import Block from '../../utils/Block';\nimport Helper from '../Helper';\nimport MainForm from '../MainForm';\nimport identification from './identification.pug';\n\nclass Identification<Fields> extends Block {\n  constructor(props: {\n    title: string,\n    form: MainForm<Fields>,\n    helper?: Helper,\n  }) {\n    super('div', {}, {\n      title: props.title,\n      form: props.form,\n      helper: props.helper,\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  render() {\n    return identification({\n      title: this.props.title,\n      form: this.props.form,\n      helper: this.props.helper,\n    });\n  }\n}\n\nexport default Identification;\n",".helper\r\n  span.helper__text #{text}  \r\n    span.helper__button !{link}","import Helper from './Helper';\n\nexport default Helper;\n","import BlockEvent from '../../types/BlockEvent';\nimport Block from '../../utils/Block';\nimport Button from '../Button';\nimport identification from './helper.pug';\n\nclass Helper extends Block {\n  constructor(props: {\n    text: string,\n    textLink: string,\n    onclick: BlockEvent,\n  }) {\n    super('div', {}, {\n      text: props.text,\n      link: new Button({\n        onclick: props.onclick,\n        content: props.textLink,\n        theme: 'link',\n      }),\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  render() {\n    return identification({\n      text: this.props.text,\n      link: this.props.link,\n    });\n  }\n}\n\nexport default Helper;\n","import Block from './Block';\n\nclass Route {\n  public pathname: string;\n\n  private BlockClass: typeof Block;\n\n  private block: Block | null;\n\n  private currentRoot: HTMLElement;\n\n  constructor(pathname: string, view: typeof Block, currentRoot: HTMLElement) {\n    this.pathname = pathname;\n    this.BlockClass = view;\n    this.block = null;\n    this.currentRoot = currentRoot;\n  }\n\n  match(pathname: string) {\n    return pathname === this.pathname;\n  }\n\n  render() {\n    this.block = new this.BlockClass();\n    this.currentRoot.innerHTML = '';\n    this.currentRoot.appendChild(this.block.element);\n  }\n}\n\nexport default Route;\n","import Block from './Block';\nimport Route from './Route';\n\nclass Router {\n  private currentRoot: HTMLElement;\n\n  public static instance: Router | undefined;\n\n  public routes: Array<Route>;\n\n  private history: History;\n\n  constructor(currentRoot?: HTMLElement) {\n    if (Router.instance) {\n      return Router.instance;\n    }\n    if (!currentRoot) {\n      throw Error('undefind root node');\n    }\n    this.routes = [];\n    this.history = window.history;\n    this.currentRoot = currentRoot;\n\n    Router.instance = this;\n  }\n\n  use(pathname: string, block: typeof Block) {\n    const route = new Route(pathname, block, this.currentRoot);\n    this.routes.push(route);\n    return this;\n  }\n\n  start() {\n    window.onpopstate = ((e) => {\n      const window = e.target as Window;\n      this.onRoute(window.location.pathname);\n    });\n\n    this.onRoute(window.location.pathname);\n  }\n\n  private onRoute(pathname: string) {\n    const route = this.getRoute(pathname);\n    if (!route) {\n      return;\n    }\n    route.render();\n  }\n\n  go(pathname: string) {\n    this.history.pushState({}, pathname, pathname);\n    this.onRoute(pathname);\n  }\n\n  back() {\n    this.history.back();\n  }\n\n  forward() {\n    this.history.forward();\n  }\n\n  private getRoute(pathname: string) {\n    return this.routes.find((route) => route.match(pathname));\n  }\n}\nexport default Router;\n","abstract class BaseAPI {\n  abstract create?(param: any): Promise<any>;\n\n  abstract request?(param: any): Promise<any>;\n\n  abstract update?(param: any): Promise<any>;\n\n  abstract delete?(param: any): Promise<any>;\n}\n\nexport default BaseAPI;\n","import RequestOptions from '../types/RequestOptions';\n\nconst METHODS = {\n  GET: 'GET',\n  PUT: 'PUT',\n  POST: 'POST',\n  DELETE: 'DELETE',\n};\n\nclass HTTP {\n  private startUrl: string;\n\n  private timeout: number;\n\n  private headers: { [index: string]: string };\n\n  constructor(startUrl: string, options: {\n    timeout?: number,\n    headers?: { [index: string]: string }\n  } = {}) {\n    this.startUrl = startUrl;\n    this.timeout = options.timeout || 10000;\n    this.headers = options.headers || {};\n  }\n\n  get<Response>(url: string) {\n    const newUrl = this.startUrl + url;\n    return this.request<null, Response>(\n      newUrl,\n      {\n        method: METHODS.GET,\n      },\n    );\n  }\n\n  put<Request, Response>(url: string, data: Request) {\n    return this.request<Request, Response>(\n      this.startUrl + url,\n      {\n        data,\n        method: METHODS.PUT,\n      },\n    );\n  }\n\n  post<Request, Response>(url: string, data?: Request) {\n    return this.request<Request, Response>(\n      this.startUrl + url,\n      {\n        data,\n        method: METHODS.POST,\n      },\n    );\n  }\n\n  delete<Request, Response>(url: string, data: Request) {\n    return this.request<Request, Response>(\n      this.startUrl + url,\n      {\n        data,\n        method: METHODS.DELETE,\n      },\n    );\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  request<Request, Response>(url: string, options: RequestOptions<Request>): Promise<Response> {\n    const {\n      method,\n      data,\n    } = options;\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n\n      xhr.open(method, url);\n\n      Object.entries(this.headers).forEach((v) => xhr.setRequestHeader(...v));\n\n      xhr.responseType = 'json';\n      xhr.onload = () => {\n        if (xhr.status < 400) {\n          resolve(xhr.response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n\n      xhr.onabort = reject;\n      xhr.onerror = reject;\n      xhr.timeout = this.timeout;\n      xhr.ontimeout = reject;\n      xhr.withCredentials = true;\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      if (method === METHODS.GET || !data) {\n        xhr.send();\n      } else {\n        xhr.send(JSON.stringify(data));\n      }\n    });\n  }\n}\n\nexport default HTTP;\n","import LoginRequest from '../types/LoginRequest';\nimport { Profile, RegUser } from '../types/User';\nimport BaseAPI from '../utils/base-api';\nimport HTTP from '../utils/HTTP';\n\nconst authAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/auth');\n\nclass AuthAPI extends BaseAPI {\n  public login(user: LoginRequest) {\n    return authAPIInstance.post<LoginRequest, void>('/signin', user);\n  }\n\n  public logout() {\n    return authAPIInstance.post<void, void>('/logout');\n  }\n\n  public create(user: RegUser) {\n    return authAPIInstance.post<RegUser, { id: number }>('/signup', user);\n  }\n\n  public request() {\n    return authAPIInstance.get<Profile>('/user');\n  }\n\n  update: undefined;\n\n  delete: undefined;\n}\n\nexport default AuthAPI;\n","import ApiError from '../../types/ApiError';\n\nconst setAuthError = (payload: ApiError) => ({\n  type: 'errors/SETAUTH',\n  payload,\n});\n\nexport default setAuthError;\n","import { Profile } from '../../types/User';\n\nconst setProfile = (profile: Profile) => ({\n  type: 'profile/SET',\n  payload: profile,\n});\n\nexport default setProfile;\n","import ApiError from '../../types/ApiError';\n\nconst setRegError = (payload: ApiError) => ({\n  type: 'errors/SETREG',\n  payload,\n});\n\nexport default setRegError;\n","import Action from '../types/Action';\nimport Listener from './Listener';\nimport Reducer from './Reducer';\n\nclass Store {\n  private state: Indexed = {};\n\n  private listeners: Array<Listener> = [];\n\n  private reducers: {\n    [index: string]: Reducer\n  } = {};\n\n  public addReducer(name: string, reducer: Reducer) {\n    this.reducers[name] = reducer;\n\n    this.dispatch({\n      type: '@@INIT',\n    });\n    return this;\n  }\n\n  public getState() {\n    return this.state;\n  }\n\n  public dispatch(action: Action) {\n    this.state = this.reducer(action);\n\n    this.emitListeners();\n  }\n\n  private emitListeners() {\n    this.listeners.forEach((listener) => listener(this.state));\n  }\n\n  public subscribe(listener: Listener) {\n    listener(this.state);\n    this.listeners.push(listener);\n  }\n\n  private reducer(action: Action) {\n    const newState: Indexed = {};\n    Object.entries(this.reducers).forEach(([key, reducer]) => {\n      newState[key] = reducer(this.state[key], action);\n    });\n\n    return newState;\n  }\n}\nexport default new Store();\n","import AuthAPI from '../api/auth-api';\nimport setAuthError from '../store/actrionCreaters/setAuthError';\nimport setProfile from '../store/actrionCreaters/setProfile';\nimport setRegError from '../store/actrionCreaters/setRegError';\nimport LoginRequest from '../types/LoginRequest';\nimport { RegUser } from '../types/User';\nimport Router from '../utils/Router';\nimport Store from '../utils/Store';\n\nclass AuthService {\n  private api: AuthAPI;\n\n  constructor() {\n    this.api = new AuthAPI();\n  }\n\n  public async login(data: LoginRequest) {\n    try {\n      await this.api.login(data);\n      (new Router()).go('/');\n    } catch (error) {\n      Store.dispatch(setAuthError(error));\n    }\n  }\n\n  public async logout() {\n    try {\n      await this.api.logout();\n      (new Router()).go('/auth/');\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    }\n  }\n\n  public async reg(data: RegUser) {\n    try {\n      await this.api.create(data);\n      (new Router()).go('/');\n    } catch (error) {\n      Store.dispatch(setRegError(error));\n    }\n  }\n\n  public async getProfile() {\n    try {\n      const user = await this.api.request();\n      Store.dispatch(setProfile(user));\n    } catch (err) {\n      (new Router()).go('/auth/');\n    }\n  }\n\n  public async checkNotAuth() {\n    const user = await this.api.request();\n    (new Router()).go('/');\n    Store.dispatch(setProfile(user));\n  }\n}\n\nexport default new AuthService();\n","type PlainObject<T = any> = {\n  [k in string]: T;\n};\n\nfunction isPlainObject(value: unknown): value is PlainObject {\n  return (\n    typeof value === 'object'\n    && value !== null\n    && value.constructor === Object\n    && Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction isArray(value: unknown): value is [] {\n  return Array.isArray(value);\n}\n\nfunction isArrayOrObject(value: unknown): value is [] | PlainObject {\n  return isPlainObject(value) || isArray(value);\n}\n\nfunction isEqual(lhs: PlainObject, rhs: PlainObject) {\n  if (Object.keys(lhs).length !== Object.keys(rhs).length) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [key, value] of Object.entries(lhs)) {\n    const rightValue = rhs[key];\n    if (isArrayOrObject(value) && isArrayOrObject(rightValue)) {\n      if (isEqual(value, rightValue)) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n      return false;\n    }\n    if (value !== rightValue) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default isEqual;\n","import isEqual from './isEqual';\n\nconst memoize = <Data = any>(dataFunc: (state: any) => Data, actionFunc: (data: Data) => void) => {\n  let memo: Data;\n  return (state: any) => {\n    const data = dataFunc(state);\n    if (!isEqual({ a: data }, { a: memo })) {\n      actionFunc(data);\n      memo = data;\n    }\n  };\n};\n\nexport default memoize;\n","import ApiError from '../../types/ApiError';\n\nconst selectRegError = (state: Indexed) => state.errors.reg as ApiError | undefined;\n\nexport default selectRegError;\n","import Block from '../../utils/Block';\nimport reg from './reg.pug';\nimport MainForm from '../../components/MainForm';\nimport Identification from '../../components/Identification';\nimport Helper from '../../components/Helper';\nimport Router from '../../utils/Router';\nimport AuthService from '../../services/AuthService';\nimport memoize from '../../utils/memoize';\nimport selectRegError from '../../store/selectors/selectRegError';\nimport Store from '../../utils/Store';\nimport { RegUser } from '../../types/User';\n\nexport default class AuthPage extends Block {\n  constructor() {\n    super('div', {}, {\n      regForm: new Identification({\n        title: 'Регистрация',\n        form: new MainForm({\n          valid: true,\n          buttonText: 'Зарегистрироваться',\n          fields: [{\n            placeholder: 'Имя',\n            name: 'first_name',\n            type: 'text',\n            validFunc: (value: string) => /^[А-ЯA-Z][а-яёЁa-z]+$/.test(value),\n          }, {\n            placeholder: 'Фамилия',\n            name: 'second_name',\n            type: 'text',\n            validFunc: (value: string) => /^[А-ЯA-Z][а-яёЁa-z]+$/.test(value),\n          }, {\n            placeholder: 'Логин',\n            name: 'login',\n            type: 'text',\n            validFunc: (value: string) => /^(?=.*[a-zA-Z_-])[a-zA-Z0-9-_]{3,20}$/.test(value),\n          }, {\n            placeholder: 'Почта',\n            name: 'email',\n            type: 'text',\n            validFunc: (value: string) => /^(?=.*[a-zA-Z_@-])[a-zA-Z_@-]+@[a-zA-Z_-]+\\.[a-zA-Z_-]+$/.test(value),\n          }, {\n            placeholder: 'Телефон',\n            name: 'phone',\n            type: 'text',\n            validFunc: (value: string) => /^[\\d/+]\\d{9,14}$/.test(value),\n          }, {\n            placeholder: 'Пароль',\n            name: 'password',\n            type: 'password',\n            validFunc: (value: string) => /^(?=.*[A-ZА-Я])(?=.*\\d).{8,40}$/.test(value),\n          }],\n          submit: (formObj: RegUser) => {\n            AuthService.reg(formObj);\n          },\n        }),\n        helper: new Helper({\n          text: 'Уже есть аккаун?',\n          onclick: () => {\n            (new Router()).go('/auth/');\n          },\n          textLink: 'Войти',\n        }),\n      }),\n    });\n  }\n\n  componentDidMount() {\n    AuthService.checkNotAuth();\n    document.title = 'Регистрация';\n    const memoizeErrorMessage = memoize(\n      (state) => selectRegError(state),\n      (error) => {\n        if (!error) {\n          return;\n        }\n        this.props.regForm.props.form.setProps({\n          error: error.reason,\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeErrorMessage(state);\n    });\n  }\n\n  render() {\n    return reg({\n      form: this.props.regForm,\n    });\n  }\n}\n","include ../../templates/centering/centering\r\n\r\n+centering\r\n  div \r\n    | !{form}","import ApiError from '../../types/ApiError';\n\nconst selectAuthError = (state: Indexed) => state.errors.auth as ApiError | undefined;\n\nexport default selectAuthError;\n","import Block from '../../utils/Block';\nimport auth from './auth.pug';\nimport Helper from '../../components/Helper';\nimport Identification from '../../components/Identification';\nimport MainForm from '../../components/MainForm';\nimport AuthService from '../../services/AuthService';\nimport LoginRequest from '../../types/LoginRequest';\nimport Router from '../../utils/Router';\nimport memoize from '../../utils/memoize';\nimport selectAuthError from '../../store/selectors/selectAuthError';\nimport Store from '../../utils/Store';\n\nexport default class AuthPage extends Block {\n  constructor() {\n    super('div', {}, {\n      form: new Identification<LoginRequest>({\n        title: 'Вход',\n        form: new MainForm({\n          valid: true,\n          buttonText: 'Войти',\n          fields: [{\n            placeholder: 'Логин',\n            name: 'login',\n            type: 'text',\n          }, {\n            placeholder: 'Пароль',\n            name: 'password',\n            type: 'password',\n          }],\n          submit: async (formObj) => {\n            await AuthService.login(formObj);\n          },\n        }),\n        helper: new Helper({\n          text: 'Нет аккаунта?',\n          onclick: () => {\n            (new Router()).go('/reg/');\n          },\n          textLink: 'Регистрация',\n        }),\n      }),\n    });\n  }\n\n  componentDidMount() {\n    document.title = 'Вход';\n    AuthService.checkNotAuth();\n    const memoizeErrorMessage = memoize(\n      (state) => selectAuthError(state),\n      (error) => {\n        if (!error) {\n          return;\n        }\n        this.props.form.props.form.setProps({\n          error: error.reason,\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeErrorMessage(state);\n    });\n  }\n\n  render() {\n    return auth({\n      form: this.props.form,\n    });\n  }\n}\n","import Chat from '../types/Chat';\nimport BaseAPI from '../utils/base-api';\nimport HTTP from '../utils/HTTP';\n\nconst chatsAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/chats');\n\nclass ChatsAPI extends BaseAPI {\n  public request() {\n    return chatsAPIInstance.get<Array<Chat>>('/');\n  }\n\n  public create(data: { title: string }) {\n    return chatsAPIInstance.post<{ title: string }, { id: number }>('/', data);\n  }\n\n  public token(chatId: number) {\n    return chatsAPIInstance.post<undefined, { token: string }>(`/token/${chatId}`);\n  }\n\n  update: undefined;\n\n  delete: undefined;\n}\n\nexport default ChatsAPI;\n","const setActiveChatId = (id: number) => ({\n  type: 'currentChat/SETACTIVECHATID',\n  payload: id,\n});\n\nexport default setActiveChatId;\n","const setChatNamePopUpDisable = () => ({\n  type: 'popUp/SETCHATNAMEDISABLE',\n});\n\nexport default setChatNamePopUpDisable;\n","import Chat from '../../types/Chat';\n\nconst setChats = (chats: Array<Chat>) => ({\n  type: 'chats/SET',\n  payload: chats,\n});\n\nexport default setChats;\n","import Chat from '../../types/Chat';\n\nconst selectChat = (state: Indexed, chatId: number): Chat | undefined => {\n  const c: Chat = state.chats.find((chat: Chat) => chat.id === chatId);\n  return c;\n};\n\nexport default selectChat;\n","import Message from '../../types/Message';\n\nconst addNewMessages = (chatId: number, messages: Array<Message>) => ({\n  type: 'chats/ADDNEWMESSAGES',\n  payload: {\n    chatId,\n    messages,\n  },\n});\n\nexport default addNewMessages;\n","import Message from '../../types/Message';\n\nconst addOldMessages = (chatId: number, messages: Array<Message>) => ({\n  type: 'chats/ADDOLDMESSAGES',\n  payload: {\n    chatId,\n    messages,\n  },\n});\n\nexport default addOldMessages;\n","import Chat from '../../types/Chat';\n\nconst selectActiveChat = (state: Indexed): Chat | undefined => {\n  // eslint-disable-next-line max-len\n  const activeChat: Chat = state.chats.find((chat: Chat) => chat.id === state.currentChat.activeChatId);\n  return activeChat;\n};\n\nexport default selectActiveChat;\n","import { Profile } from '../../types/User';\n\nconst selectProfile = (state: Indexed) => state.profile as Profile | undefined;\n\nexport default selectProfile;\n","import ChatsAPI from '../api/chats-api';\nimport addNewMessages from '../store/actrionCreaters/addNewMessages';\nimport addOldMessages from '../store/actrionCreaters/addOldMessages';\nimport selectActiveChat from '../store/selectors/selectActiveChat';\nimport selectProfile from '../store/selectors/selectProfile';\nimport Message from '../types/Message';\nimport Store from '../utils/Store';\n\nclass MessagesService {\n  private sockets: {\n    [key: number]: WebSocket;\n  } = {};\n\n  public async connect(chatId: number) {\n    const state = Store.getState();\n    const profile = selectProfile(state);\n    if (!profile) {\n      return;\n    }\n    const chatsApi = new ChatsAPI();\n    const { token } = await chatsApi.token(chatId);\n    const socket = new WebSocket(`wss://ya-praktikum.tech/ws/chats/${profile.id}/${chatId}/${token}`);\n    this.sockets[chatId] = socket;\n    socket.addEventListener('message', (event) => {\n      this.get(event.data, chatId);\n    });\n  }\n\n  private async get(data: string, chat_id: number) {\n    const result: Message = await JSON.parse(data);\n    if (result.type === 'message') {\n      Store.dispatch(addNewMessages(chat_id, [result]));\n    }\n    if (Array.isArray(result)) {\n      Store.dispatch(addOldMessages(chat_id, result));\n    }\n  }\n\n  public send(message: string) {\n    if (!message) {\n      return;\n    }\n    const state = Store.getState();\n    const chat = selectActiveChat(state);\n    if (!chat) {\n      return;\n    }\n    this.sockets[chat.id].send(JSON.stringify({\n      content: message,\n      type: 'message',\n    }));\n  }\n\n  public async getlastMessages(chatId: number, offset: number = 0) {\n    this.sockets[chatId].send(JSON.stringify({\n      content: offset,\n      type: 'get old',\n    }));\n  }\n}\n\nexport default new MessagesService();\n","import ChatsAPI from '../api/chats-api';\nimport setActiveChatId from '../store/actrionCreaters/setActiveChatId';\nimport setChatNamePopUpDisable from '../store/actrionCreaters/setChatNamePopUpDisable';\nimport setChats from '../store/actrionCreaters/setChats';\nimport selectChat from '../store/selectors/selectChat';\nimport Store from '../utils/Store';\nimport MessagesService from './MessagesService';\n\nclass ChatsService {\n  private api: ChatsAPI;\n\n  constructor() {\n    this.api = new ChatsAPI();\n  }\n\n  public async init() {\n    try {\n      const chats = await this.api.request();\n      Store.dispatch(setChats(chats));\n      chats.forEach((chat) => {\n        MessagesService.connect(chat.id);\n      });\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n\n  public async get(chatId: number) {\n    Store.dispatch(setActiveChatId(chatId));\n    const state = Store.getState();\n    const chat = selectChat(state, chatId);\n    if (!chat) {\n      return;\n    }\n    if (!chat.messages || chat.messages.length < 20) {\n      const offset = chat.messages ? chat.messages.length : 0;\n      MessagesService.getlastMessages(chatId, offset);\n    }\n  }\n\n  public async create(data: { title: string }) {\n    try {\n      await this.api.create(data);\n      Store.dispatch(setChatNamePopUpDisable());\n      this.init();\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    }\n  }\n}\n\nexport default new ChatsService();\n",".chat-item__main\r\n  .chat-item__img-container\r\n    img.chat-item__img(src= img)\r\n  .chat-item__content\r\n    p.chat-item__author #{author} \r\n    p.chat-item__message #{message}\r\n.chat-item__meta\r\n    .chat-item__count\r\n      if count !== 0\r\n        .chat-item__count-text #{count}\r\n    p.chat-item__date #{date}","import ChatItem from './ChatItem';\n\nexport default ChatItem;\n","import ChatsService from '../../services/ChatsService';\nimport selectActiveChat from '../../store/selectors/selectActiveChat';\nimport Block from '../../utils/Block';\nimport memoize from '../../utils/memoize';\nimport Store from '../../utils/Store';\nimport chatItem from './chatItem.pug';\n\nclass ChatItem extends Block {\n  constructor(props: {\n    id: number,\n    author: string,\n    message: string,\n    date: string,\n    count: number,\n    img: string,\n  }) {\n    super('div', {}, {\n      id: props.id,\n      author: props.author,\n      message: props.message,\n      date: props.date,\n      count: props.count,\n      img: props.img,\n      active: false,\n      events: {\n        click: () => {\n          ChatsService.get(this.props.id);\n        },\n      },\n    });\n  }\n\n  setClass() {\n    let baseClass = 'chat-item';\n    if (this.props.active) {\n      baseClass = `${baseClass} chat-item_active`;\n    }\n    this.attrs.class = baseClass;\n  }\n\n  componentDidMount() {\n    const memoizeActiveChat = memoize(\n      (state) => selectActiveChat(state),\n      (data) => {\n        if (!data) {\n          return;\n        }\n        this.setProps({\n          active: this.props.id === data.id,\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeActiveChat(state);\n    });\n  }\n\n  render() {\n    this.setClass();\n    return chatItem(this.props);\n  }\n}\n\nexport default ChatItem;\n",".profile-button\r\n  .profile-button__img-container\r\n    img.profile-button__img(src= avatar)\r\n  p.profile-button__name #{name}","import ProfileButton from './ProfileButton';\n\nexport default ProfileButton;\n","import Block from '../../utils/Block';\nimport Router from '../../utils/Router';\nimport profileButton from './profileButton.pug';\n\nclass ProfileButton extends Block {\n  constructor(props: {\n    avatar: string,\n    name: string,\n    link?: string,\n  }) {\n    super('div', {}, {\n      avatar: props.avatar,\n      name: props.name,\n      link: props.link,\n      events: {\n        click: () => {\n          if (this.props.link) {\n            (new Router()).go(this.props.link);\n          }\n        },\n      },\n    });\n  }\n\n  render() {\n    return profileButton(this.props);\n  }\n}\n\nexport default ProfileButton;\n",".chat-list__search !{search}\r\n.chat-list__bar !{chatBar}\r\n.chat-list__footer \r\n  .chat-list__profile !{profile}\r\n  .chat-list__add !{addChatButton} ","import Chat from '../../types/Chat';\n\nconst selectChats = (state: Indexed) => state.chats as Array<Chat>;\n\nexport default selectChats;\n","const setChatNamePopUpActive = () => ({\n  type: 'popUp/SETCHATNAMEACTIVE',\n});\n\nexport default setChatNamePopUpActive;\n","const transformDate = (time: string) => {\n  const date = new Date(Date.parse(time));\n  return `${date.getHours()}:${date.getMinutes()}`;\n};\n\nexport default transformDate;\n","each val in chats ? chats : ['There are no values']  \r\n  | !{val}","import ChatsBar from './ChatsBar';\n\nexport default ChatsBar;\n","import Block from '../../utils/Block';\nimport ChatItem from '../ChatItem';\nimport chatsBar from './chatsBar.pug';\n\nclass ChatsBar extends Block {\n  constructor() {\n    super('div', {}, {\n      chats: [],\n      searchValue: '',\n    });\n  }\n\n  render() {\n    const chats = this.props.chats\n      .filter((chat: ChatItem) => chat.props.author.startsWith(this.props.searchValue));\n    return chatsBar({\n      chats,\n    });\n  }\n}\n\nexport default ChatsBar;\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9fssg\")).toString();","import imageURL from '../../static/img/avatar.jpg';\n\nconst getAvatar = (link: string | undefined | null) => (link ? `https://ya-praktikum.tech/api/v2/resources${link}` : imageURL);\n\nexport default getAvatar;\n","import ChatsList from './ChatsList';\n\nexport default ChatsList;\n","import Block from '../../utils/Block';\nimport ChatItem from '../ChatItem';\nimport Input from '../Input';\nimport ProfileButton from '../ProfileButton';\nimport chatsList from './chatsList.pug';\nimport Button from '../Button';\nimport Store from '../../utils/Store';\nimport selectChats from '../../store/selectors/selectChats';\nimport setChatNamePopUpActive from '../../store/actrionCreaters/setChatNamePopUpActive';\nimport memoize from '../../utils/memoize';\nimport transformDate from '../../utils/transformDate';\nimport selectProfile from '../../store/selectors/selectProfile';\nimport ChatsBar from '../ChatBar';\nimport getAvatar from '../../utils/getAvatar';\n\nclass ChatsList extends Block {\n  constructor() {\n    super('div', {}, {\n      chatBar: new ChatsBar(),\n      search: new Input({\n        placeholder: 'Поиск по чатам',\n        name: 'search',\n        type: 'text',\n        events: {\n          input: (e: KeyboardEvent) => {\n            if (!e.target) {\n              return;\n            }\n            const input = e.target as HTMLInputElement;\n            this.props.chatBar.setProps({\n              searchValue: input.value,\n            });\n          },\n        },\n      }),\n      addChatButton: new Button({\n        content: 'Новый чат',\n        onclick: () => {\n          Store.dispatch(setChatNamePopUpActive());\n        },\n      }),\n      profile: new ProfileButton({\n        avatar: '',\n        link: '/profile/',\n        name: '',\n      }),\n    });\n  }\n\n  setClass() {\n    const baseClass = 'chat-list';\n    this.attrs.class = baseClass;\n  }\n\n  componentDidMount() {\n    const memoizeSelectChats = memoize(\n      (state) => selectChats(state),\n      (data) => {\n        this.props.chatBar.setProps({\n          chats: data.map((c) => {\n            const lastMessege = c.messages ? c.messages[0] : c.last_message;\n            return new ChatItem({\n              id: c.id,\n              author: c.title,\n              message: lastMessege ? lastMessege.content : 'Пока нет сообщений',\n              date: lastMessege ? transformDate(lastMessege.time) : '',\n              count: c.unread_count,\n              img: getAvatar(c.avatar),\n            });\n          }),\n        });\n      },\n    );\n    const memoizeGetProfile = memoize(\n      (state) => selectProfile(state),\n      (profile) => {\n        if (!profile) {\n          return;\n        }\n        this.props.profile.setProps({\n          avatar: getAvatar(profile.avatar),\n          name: `${profile.first_name} ${profile.second_name}`,\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeSelectChats(state);\n      memoizeGetProfile(state);\n    });\n  }\n\n  render() {\n    this.setClass();\n    return chatsList(this.props);\n  }\n}\n\nexport default ChatsList;\n","include ../../templates/centering/centering\r\n\r\n\r\n| !{chatList}\r\n| !{chatWindow}\r\n| !{chatNamePopUp}\r\n| !{chatSettingsPopUp}",".chat-window__header \r\n  .chat-window__profile \r\n    | !{profile}\r\n  .chat-window__settings-button \r\n    | !{chatSettingsButton}\r\n.chat-window__messeges\r\n  | !{messagesList}\r\n.chat-window__input\r\n  | !{message}",".create-message \r\n  .create-message_input !{inputMessage}\r\n  .create-message_button !{sendButton}","import CreateMessege from './CreateMessege';\n\nexport default CreateMessege;\n","import MessgesService from '../../services/MessagesService';\nimport Block from '../../utils/Block';\nimport Button from '../Button';\nimport Input from '../Input';\nimport createMessege from './createMessege.pug';\n\nclass CreateMessege extends Block {\n  constructor() {\n    super('div', {}, {\n      sendButton: new Button({\n        content: 'Отправить',\n        onclick: () => this.sendMessage(),\n      }),\n      inputMessage: new Input({\n        placeholder: 'Напишите сообщение',\n        name: 'message',\n        type: 'text',\n        fullHeight: true,\n      }),\n    });\n  }\n\n  sendMessage() {\n    const input = this.props.inputMessage.element as HTMLInputElement;\n    MessgesService.send(input.value);\n    input.value = '';\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', (event) => {\n      if (event.key === 'Enter') {\n        event.preventDefault();\n        this.sendMessage();\n      }\n    });\n  }\n\n  render() {\n    return createMessege(this.props);\n  }\n}\n\nexport default CreateMessege;\n","import Message from '../../types/Message';\nimport selectActiveChat from './selectActiveChat';\n\nconst selectMessages = (state: Indexed): Array<Message> | undefined => {\n  const activeChat = selectActiveChat(state);\n  if (!activeChat) {\n    return [];\n  }\n  return activeChat.messages;\n};\n\nexport default selectMessages;\n","each val in messages ? messages : ['There are no values']  \r\n  | !{val}",".message_content  #{text}\r\n.message_footer \r\n  .message_author \r\n  .message_date  #{date}","import Message from './Message';\n\nexport default Message;\n","import Block from '../../utils/Block';\nimport message from './message.pug';\n\nclass Message extends Block {\n  constructor(props: {\n    id: number,\n    text: string,\n    date: string,\n    self: boolean,\n  }) {\n    super('div', {}, {\n      id: props.id,\n      text: props.text,\n      date: props.date,\n      self: props.self,\n    });\n  }\n\n  setClass() {\n    let baseClass = 'message';\n    if (this.props.self) {\n      baseClass = `${baseClass} message__self`;\n    }\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return message(this.props);\n  }\n}\n\nexport default Message;\n","import MessagesList from './MessagesList';\n\nexport default MessagesList;\n","import selectMessages from '../../store/selectors/selectMessages';\nimport Block from '../../utils/Block';\nimport memoize from '../../utils/memoize';\nimport Store from '../../utils/Store';\nimport messagesList from './messagesList.pug';\nimport Message from '../Message';\nimport selectProfile from '../../store/selectors/selectProfile';\nimport transformDate from '../../utils/transformDate';\n\nclass MessagesList extends Block {\n  constructor() {\n    super('div', {}, {\n      messages: ['dssdf', 'sdfsf'],\n    });\n  }\n\n  componentDidMount() {\n    const memoizeMessages = memoize(\n      (state) => {\n        const messages = selectMessages(state);\n        const profile = selectProfile(state);\n        return {\n          messages,\n          profile,\n        };\n      },\n      ({ messages, profile }) => {\n        if (!messages || !profile) {\n          return;\n        }\n        this.setProps({\n          messages: messages.map((d) => new Message({\n            id: d.id,\n            text: d.content,\n            date: transformDate(d.time),\n            self: d.user_id === profile.id,\n          })),\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeMessages(state);\n    });\n  }\n\n  setClass() {\n    const baseClass = 'messages-list';\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return messagesList(this.props);\n  }\n}\n\nexport default MessagesList;\n","import { Member } from '../types/User';\nimport BaseAPI from '../utils/base-api';\nimport HTTP from '../utils/HTTP';\n\nconst membersAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/chats/users');\n\nclass MembersAPI extends BaseAPI {\n  public request(chatId: number) {\n    const api = new HTTP(`https://ya-praktikum.tech/api/v2/chats/${chatId}/users`);\n    return api.get<Array<Member>>('/');\n  }\n\n  public create(param: { userId: number, chatId: number }) {\n    return membersAPIInstance.put<{ users: Array<number>, chatId: number }, string>('/', { users: [param.userId], chatId: param.chatId });\n  }\n\n  public delete(param: { userId: number, chatId: number }) {\n    return membersAPIInstance.delete<{ users: Array<number>, chatId: number }, string>('/', { users: [param.userId], chatId: param.chatId });\n  }\n\n  update: undefined;\n}\n\nexport default MembersAPI;\n","const setChatSettingsPopUpActive = () => ({\n  type: 'popUp/SETCHATSETTINGACTIVE',\n});\n\nexport default setChatSettingsPopUpActive;\n","import { User } from '../../types/User';\n\nconst setMembers = (payload: { chatId: number, members: Array<User> }) => ({\n  type: 'chats/SETMEMBERS',\n  payload,\n});\n\nexport default setMembers;\n","import MembersAPI from '../api/members-api';\nimport setChatSettingsPopUpActive from '../store/actrionCreaters/setChatSettingsPopUpActive';\nimport setMembers from '../store/actrionCreaters/setMembers';\nimport selectActiveChat from '../store/selectors/selectActiveChat';\nimport Store from '../utils/Store';\n\nclass MembersService {\n  private api: MembersAPI;\n\n  constructor() {\n    this.api = new MembersAPI();\n  }\n\n  public openMembersPopUp() {\n    Store.dispatch(setChatSettingsPopUpActive());\n    const activeChat = selectActiveChat(Store.getState());\n    if (!activeChat) {\n      return;\n    }\n    this.get(activeChat.id);\n  }\n\n  public async get(chatId: number) {\n    try {\n      const members = await this.api.request(chatId);\n      Store.dispatch(setMembers({ chatId, members }));\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n\n  public async add(userId: number) {\n    try {\n      const chat = selectActiveChat(Store.getState());\n      if (!chat) {\n        return;\n      }\n      await this.api.create({ userId, chatId: chat.id });\n      this.get(chat.id);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n\n  public async delete(userId: number) {\n    try {\n      const chat = selectActiveChat(Store.getState());\n      if (!chat) {\n        return;\n      }\n      await this.api.delete({ userId, chatId: chat.id });\n      this.get(chat.id);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n}\n\nexport default new MembersService();\n","import Icon from './Icon';\n\nexport default Icon;\n","import Block from '../../utils/Block';\n\nclass Icon extends Block {\n  constructor(props: {\n    name: 'plus-square' | 'sliders' | 'trash-2',\n  }) {\n    super('div', {}, {\n      name: props.name,\n    });\n  }\n\n  setClass() {\n    const baseClass = `icon icon_name_${this.props.name}`;\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return '';\n  }\n}\n\nexport default Icon;\n","import ChatWindow from './ChatWindow';\n\nexport default ChatWindow;\n","import Block from '../../utils/Block';\nimport ProfileButton from '../ProfileButton';\nimport chatWindow from './chatWindow.pug';\nimport imageURL from '../../../static/img/avatar.jpg';\nimport Button from '../Button';\nimport Store from '../../utils/Store';\nimport selectActiveChat from '../../store/selectors/selectActiveChat';\nimport CreateMessege from '../CreateMessege';\nimport MessagesList from '../MessagesList';\nimport MembersService from '../../services/MembersService';\nimport Icon from '../Icon';\nimport getAvatar from '../../utils/getAvatar';\n\nclass ChatWindow extends Block {\n  constructor() {\n    super('div', {}, {\n      profile: new ProfileButton({\n        avatar: imageURL,\n        name: '',\n      }),\n      chatSettingsButton: new Button({\n        content: new Icon({\n          name: 'sliders',\n        }),\n        theme: 'icon',\n        onclick: () => MembersService.openMembersPopUp(),\n      }),\n      message: new CreateMessege(),\n      messagesList: new MessagesList(),\n    });\n  }\n\n  setClass() {\n    const baseClass = 'chat-window';\n    this.attrs.class = baseClass;\n  }\n\n  componentDidMount() {\n    Store.subscribe((state) => {\n      const chat = selectActiveChat(state);\n      if (!chat) {\n        return;\n      }\n      this.props.profile.setProps({\n        avatar: getAvatar(chat.avatar),\n        name: chat.title,\n      });\n    });\n  }\n\n  render() {\n    this.setClass();\n    return chatWindow(this.props);\n  }\n}\n\nexport default ChatWindow;\n",".content !{content}","import PopUp from './PopUp';\n\nexport default PopUp;\n","import BlockEvent from '../../types/BlockEvent';\nimport Block from '../../utils/Block';\nimport popUp from './popUp.pug';\n\nclass Button extends Block {\n  constructor(props: {\n    content: Block,\n    disableFunc: BlockEvent,\n    active: boolean,\n  }) {\n    super('div', {}, {\n      content: props.content,\n      events: {\n        mousedown: (e) => {\n          if (e.target === e.currentTarget) {\n            props.disableFunc();\n          }\n        },\n      },\n      active: props.active,\n    });\n  }\n\n  setClass() {\n    let baseClass = 'pop-up';\n    if (this.props.active) {\n      baseClass = `${baseClass} pop-up_active`;\n    } else {\n      baseClass = `${baseClass} pop-up_disable`;\n    }\n\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return popUp(this.props);\n  }\n}\n\nexport default Button;\n",".create-chat_title Новый чат\n.create-chat_form \n  | !{form}","import CreateChat from './CreateChat';\n\nexport default CreateChat;\n","import ChatsService from '../../services/ChatsService';\nimport Block from '../../utils/Block';\nimport MainForm from '../MainForm';\nimport createChat from './createChat.pug';\n\nclass CreateChat extends Block {\n  constructor() {\n    super('div', {}, {\n      form: new MainForm<{ name: string }>({\n        valid: true,\n        buttonText: 'Создать чат',\n        fields: [{\n          placeholder: 'Название чата',\n          name: 'name',\n          type: 'text',\n        }],\n        submit: async (formObj) => {\n          ChatsService.create({ title: formObj.name });\n        },\n      }),\n    });\n  }\n\n  setClass() {\n    const baseClass = 'create-chat';\n    this.attrs.class = baseClass;\n  }\n\n  render() {\n    this.setClass();\n    return createChat(this.props);\n  }\n}\n\nexport default CreateChat;\n","const selectCreateChatPopUpVisible = (state: Indexed) => state.popUp.chatName as boolean;\n\nexport default selectCreateChatPopUpVisible;\n","const setChatSettingsPopUpDisable = () => ({\n  type: 'popUp/SETCHATSETTINGDISABLE',\n});\n\nexport default setChatSettingsPopUpDisable;\n","const selectChatSettingPopUpVisible = (state: Indexed) => state.popUp.chatSetting as boolean;\n\nexport default selectChatSettingPopUpVisible;\n","import { Profile, UpdateProfileUser, User } from '../types/User';\nimport BaseAPI from '../utils/base-api';\nimport HTTP from '../utils/HTTP';\n\nconst userAPIInstance = new HTTP('https://ya-praktikum.tech/api/v2/user');\n\nclass UsersAPI extends BaseAPI {\n  public search(login: string) {\n    return userAPIInstance.post<{ login: string }, Array<User>>('/search', { login });\n  }\n\n  public update(user: UpdateProfileUser) {\n    return userAPIInstance.put<UpdateProfileUser, Profile>('/profile', user);\n  }\n\n  public updatePassword(pass: {\n    oldPassword: string,\n    newPassword: string,\n  }) {\n    return userAPIInstance.put<{\n      oldPassword: string,\n      newPassword: string,\n    }, string>('/password', pass);\n  }\n\n  create: undefined;\n\n  request: undefined;\n\n  delete: undefined;\n}\n\nexport default UsersAPI;\n","const clearPasswordError = () => ({\n  type: 'errors/CLEARPASSWORD',\n});\n\nexport default clearPasswordError;\n","const clearProfileError = () => ({\n  type: 'errors/CLEARPROFILE',\n});\n\nexport default clearProfileError;\n","import ApiError from '../../types/ApiError';\n\nconst setPasswordError = (payload: ApiError) => ({\n  type: 'errors/SETPASSWORD',\n  payload,\n});\n\nexport default setPasswordError;\n","import ApiError from '../../types/ApiError';\n\nconst setProfileError = (payload: ApiError) => ({\n  type: 'errors/SETPROFILE',\n  payload,\n});\n\nexport default setProfileError;\n","import { User } from '../../types/User';\n\nconst setSearchUsers = (users: Array<User>) => ({\n  type: 'searchUsers/SETUSERS',\n  payload: users,\n});\n\nexport default setSearchUsers;\n","import selectActiveChat from './selectActiveChat';\nimport selectProfile from './selectProfile';\n\nconst checkChatRoot = (state: Indexed): boolean => {\n  const profile = selectProfile(state);\n  const chat = selectActiveChat(state);\n  return profile?.id === chat?.created_by;\n};\n\nexport default checkChatRoot;\n","import { User } from '../../types/User';\n\nconst selectSearchUsers = (state: Indexed) => state.searchUsers as Array<User>;\n\nexport default selectSearchUsers;\n","import UsersAPI from '../api/user-api';\nimport clearPasswordError from '../store/actrionCreaters/clearPasswordError';\nimport clearProfileError from '../store/actrionCreaters/clearProfileError';\nimport setPasswordError from '../store/actrionCreaters/setPasswordError';\nimport setProfile from '../store/actrionCreaters/setProfile';\nimport setProfileError from '../store/actrionCreaters/setProfileError';\nimport setSearchUsers from '../store/actrionCreaters/setSearchUsers';\nimport checkChatRoot from '../store/selectors/checkChatRoot';\nimport selectSearchUsers from '../store/selectors/selectSearchUsers';\nimport { UpdateProfileUser } from '../types/User';\nimport Store from '../utils/Store';\n\nclass UsersService {\n  private api: UsersAPI;\n\n  constructor() {\n    this.api = new UsersAPI();\n  }\n\n  public async search(login: string) {\n    try {\n      const state = Store.getState();\n      const chatRoot = checkChatRoot(state);\n      if (login.length < 3 || !chatRoot) {\n        const searchUsers = selectSearchUsers(state);\n        if (searchUsers.length > 0) {\n          Store.dispatch(setSearchUsers([]));\n        }\n        return;\n      }\n      const users = await this.api.search(login);\n      Store.dispatch(setSearchUsers(users));\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n\n  public async updateProfile(user: UpdateProfileUser) {\n    try {\n      const profile = await this.api.update(user);\n      Store.dispatch(setProfile(profile));\n      Store.dispatch(clearProfileError());\n    } catch (error) {\n      Store.dispatch(setProfileError(error));\n    }\n  }\n\n  public async updatePassword(user: {\n    oldPassword: string,\n    newPassword: string,\n  }) {\n    try {\n      await this.api.updatePassword(user);\n      Store.dispatch(clearPasswordError());\n    } catch (error) {\n      Store.dispatch(setPasswordError(error));\n    }\n  }\n}\n\nexport default new UsersService();\n","import { Member } from '../../types/User';\nimport selectActiveChat from './selectActiveChat';\nimport selectSearchUsers from './selectSearchUsers';\n\nfunction selectMembersWithUsers(state: Indexed): Array<Member> {\n  const activeChat = selectActiveChat(state);\n  if (!activeChat) {\n    return [];\n  }\n  const members = activeChat.members || [];\n  const membersId = members.map((mem) => mem.id);\n  const searchUsers = selectSearchUsers(state);\n  const searchMembers: Array<Member> = searchUsers\n    .filter((user) => {\n      if (membersId.includes(user.id)) {\n        return false;\n      }\n      return true;\n    })\n    .map((user) => ({ ...user, role: 'none' }));\n  const users = members.concat(searchMembers);\n  return users;\n}\n\nexport default selectMembersWithUsers;\n",".chat-settings-users\r\n  each val in members ? members : ['There are no values']  \r\n    | !{val}","import ChatSettingsUsers from './ChatSettingsUsers';\n\nexport default ChatSettingsUsers;\n","import Block from '../../utils/Block';\nimport MemberItom from '../MemberItom';\n\nimport chatSettingsUsers from './chatSettingsUsers.pug';\n\nclass ChatSettingsUsers extends Block {\n  constructor() {\n    super('div', {}, {\n      searchValue: '',\n      members: [],\n    });\n  }\n\n  render() {\n    const members = this.props.members\n      .filter((chat: MemberItom) => chat.props.login.startsWith(this.props.searchValue));\n    return chatSettingsUsers({\n      members,\n    });\n  }\n}\n\nexport default ChatSettingsUsers;\n",".chat-settings_header\r\n  | #{header}\r\n.chat-settings_search\r\n  | !{search}\r\n.chat-settings_members\r\n  | !{members}",".member-itom\r\n  .member-itom__profile !{profile}\r\n  .member-itom__button !{button}","import MemberItom from './MemberItom';\n\nexport default MemberItom;\n","import MembersService from '../../services/MembersService';\nimport { Member } from '../../types/User';\nimport Block from '../../utils/Block';\nimport getAvatar from '../../utils/getAvatar';\nimport Button from '../Button';\nimport Icon from '../Icon';\nimport ProfileButton from '../ProfileButton';\nimport memberItom from './memberItom.pug';\n\nconst getManageButton = (role: string, id: number, root: boolean) => {\n  if (!root || role === 'admin') {\n    return '';\n  }\n  if (role === 'none') {\n    return new Button({\n      content: new Icon({\n        name: 'plus-square',\n      }),\n      theme: 'icon',\n      onclick: () => MembersService.add(id),\n    });\n  }\n  return new Button({\n    content: new Icon({\n      name: 'trash-2',\n    }),\n    theme: 'icon',\n    onclick: () => MembersService.delete(id),\n  });\n};\n\nclass MemberItom extends Block {\n  constructor(props: {\n    root: boolean,\n    member: Member\n  }) {\n    super('div', {}, {\n      login: props.member.login,\n      profile: new ProfileButton({\n        avatar: getAvatar(props.member.avatar),\n        name: `${props.member.first_name} ${props.member.second_name} (${props.member.login})`,\n        link: `/user/${props.member.login}`,\n      }),\n      button: getManageButton(props.member.role, props.member.id, props.root),\n    });\n  }\n\n  render() {\n    return memberItom(this.props);\n  }\n}\n\nexport default MemberItom;\n","import ChatSettings from './ChatSettings';\n\nexport default ChatSettings;\n","import UsersService from '../../services/UsersService';\nimport selectActiveChat from '../../store/selectors/selectActiveChat';\nimport selectMembersWithUsers from '../../store/selectors/selectMembersWithUsers';\nimport Block from '../../utils/Block';\nimport memoize from '../../utils/memoize';\nimport Store from '../../utils/Store';\nimport ChatSettingsUsers from '../ChatSettingsUsers';\nimport Input from '../Input';\nimport chatSettings from './chatSettings.pug';\nimport checkChatRoot from '../../store/selectors/checkChatRoot';\nimport MemberItom from '../MemberItom';\n\nclass ChatSettings extends Block {\n  constructor() {\n    super('div', {}, {\n      header: '',\n      members: new ChatSettingsUsers(),\n      search: new Input({\n        placeholder: 'Поиск пользователей',\n        name: 'searchUsers',\n        type: 'text',\n        events: {\n          input: (e: KeyboardEvent) => {\n            if (!e.target) {\n              return;\n            }\n            const input = e.target as HTMLInputElement;\n            this.props.members.setProps({ searchValue: input.value });\n            UsersService.search(input.value);\n          },\n        },\n      }),\n    });\n  }\n\n  setClass() {\n    const baseClass = 'chat-settings';\n    this.attrs.class = baseClass;\n  }\n\n  componentDidMount() {\n    const memoizeSetTitle = memoize(\n      (state) => selectActiveChat(state),\n      (data) => {\n        if (!data) {\n          return;\n        }\n        this.setProps({\n          header: data.title,\n        });\n      },\n    );\n    const memoizeUsers = memoize(\n      (state) => ({\n        members: selectMembersWithUsers(state),\n        root: checkChatRoot(state),\n      }),\n      ({ members, root }) => {\n        this.props.members.setProps({\n          members: members.map((member) => new MemberItom({ root, member })),\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeSetTitle(state);\n      memoizeUsers(state);\n    });\n  }\n\n  render() {\n    this.setClass();\n    return chatSettings(this.props);\n  }\n}\n\nexport default ChatSettings;\n","import ChatsList from '../../components/ChatsList';\nimport Block from '../../utils/Block';\nimport chat from './chat.pug';\nimport ChatWindow from '../../components/ChatWindow';\nimport PopUp from '../../components/PopUp';\nimport Store from '../../utils/Store';\nimport setChatNamePopUpDisable from '../../store/actrionCreaters/setChatNamePopUpDisable';\nimport CreateChat from '../../components/CreateChat';\nimport selectCreateChatPopUpVisible from '../../store/selectors/selectCreateChatPopUpVisible';\nimport setChatSettingsPopUpDisable from '../../store/actrionCreaters/setChatSettingsPopUpDisable';\nimport selectChatSettingPopUpVisible from '../../store/selectors/selectChatSettingPopUpVisible';\nimport ChatSettings from '../../components/ChatSettings';\nimport memoize from '../../utils/memoize';\nimport AuthService from '../../services/AuthService';\nimport ChatsService from '../../services/ChatsService';\n\nexport default class Chat extends Block {\n  constructor() {\n    super('div', {}, {\n      chatList: new ChatsList(),\n      chatWindow: new ChatWindow(),\n      chatNamePopUp: new PopUp({\n        disableFunc: () => {\n          Store.dispatch(setChatNamePopUpDisable());\n        },\n        content: new CreateChat(),\n        active: true,\n      }),\n      chatSettingsPopUp: new PopUp({\n        disableFunc: () => {\n          Store.dispatch(setChatSettingsPopUpDisable());\n        },\n        content: new ChatSettings(),\n        active: true,\n      }),\n    });\n  }\n\n  setClass() {\n    const baseClass = 'chat';\n    this.attrs.class = baseClass;\n  }\n\n  componentDidMount() {\n    document.title = 'Практикум чат';\n    AuthService.getProfile();\n    ChatsService.init();\n    const memoizeCreateChat = memoize(\n      (state) => selectCreateChatPopUpVisible(state),\n      (data) => {\n        this.props.chatNamePopUp.setProps({\n          active: data,\n        });\n      },\n    );\n    const memoizeChatSetting = memoize(\n      (state) => selectChatSettingPopUpVisible(state),\n      (data) => {\n        this.props.chatSettingsPopUp.setProps({\n          active: data,\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeCreateChat(state);\n      memoizeChatSetting(state);\n    });\n  }\n\n  render() {\n    this.setClass();\n    return chat({\n      chatList: this.props.chatList,\n      chatWindow: this.props.chatWindow,\n      chatNamePopUp: this.props.chatNamePopUp,\n      chatSettingsPopUp: this.props.chatSettingsPopUp,\n    });\n  }\n}\n","include ../../templates/centering/centering\r\n\r\n+centering\r\n  div \r\n    | !{form}","import ApiError from '../../types/ApiError';\n\nconst selectPasswordError = (state: Indexed) => state.errors.password as ApiError | undefined;\n\nexport default selectPasswordError;\n","import ApiError from '../../types/ApiError';\n\nconst selectProfileError = (state: Indexed) => state.errors.profile as ApiError | undefined;\n\nexport default selectProfileError;\n",".profile-editor\r\n  .profile-editor_body\r\n    .profile-editor_title\r\n      | #{title}\r\n    .profile-editor_dataform\r\n      | !{dataForm}\r\n    .profile-editor_passwordform\r\n      | !{passwordForm}\r\n  .profile-editor_helper\r\n    | !{helper}","import ProfileEditor from './ProfileEditor';\n\nexport default ProfileEditor;\n","import UsersService from '../../services/UsersService';\nimport selectPasswordError from '../../store/selectors/selectPasswordError';\nimport selectProfileError from '../../store/selectors/selectProfileError';\nimport { UpdateProfileUser } from '../../types/User';\nimport Block from '../../utils/Block';\nimport memoize from '../../utils/memoize';\nimport Store from '../../utils/Store';\nimport Helper from '../Helper';\nimport MainForm from '../MainForm';\nimport profileEditor from './profileEditor.pug';\n\nclass ProfileEditor extends Block {\n  constructor(props: {\n    title: string,\n    helper?: Helper,\n  }) {\n    super('div', {}, {\n      title: props.title,\n      dataForm: new MainForm({\n        valid: true,\n        buttonText: 'Изменить данные',\n        fields: [{\n          placeholder: 'Имя',\n          name: 'first_name',\n          type: 'text',\n          validFunc: (value: string) => /^[А-ЯA-Z][а-яёЁa-z]+$/.test(value),\n        }, {\n          placeholder: 'Фамилия',\n          name: 'second_name',\n          type: 'text',\n          validFunc: (value: string) => /^[А-ЯA-Z][а-яёЁa-z]+$/.test(value),\n        }, {\n          placeholder: 'Логин',\n          name: 'login',\n          type: 'text',\n          validFunc: (value: string) => /^(?=.*[a-zA-Z_-])[a-zA-Z0-9-_]{3,20}$/.test(value),\n        }, {\n          placeholder: 'Отображаемый ник',\n          name: 'display_name',\n          type: 'text',\n        }, {\n          placeholder: 'Почта',\n          name: 'email',\n          type: 'text',\n          validFunc: (value: string) => /^(?=.*[a-zA-Z_@-])[a-zA-Z_@-]+@[a-zA-Z_-]+\\.[a-zA-Z_-]+$/.test(value),\n        }, {\n          placeholder: 'Телефон',\n          name: 'phone',\n          type: 'text',\n          validFunc: (value: string) => /^[\\d/+]\\d{9,14}$/.test(value),\n        }],\n        submit: (formObj: UpdateProfileUser) => {\n          UsersService.updateProfile(formObj);\n        },\n      }),\n      passwordForm: new MainForm({\n        valid: true,\n        buttonText: 'Изменить Пароль',\n        fields: [{\n          placeholder: 'Старый пароль',\n          name: 'oldPassword',\n          type: 'password',\n        }, {\n          placeholder: 'Новый пароль',\n          name: 'newPassword',\n          type: 'password',\n          validFunc: (value: string) => /^(?=.*[A-ZА-Я])(?=.*\\d).{8,40}$/.test(value),\n        }],\n        submit: (formObj: {\n          oldPassword: string,\n          newPassword: string,\n        }) => {\n          UsersService.updatePassword(formObj);\n        },\n      }),\n      helper: props.helper,\n    });\n  }\n\n  componentDidMount() {\n    const memoizeProfileError = memoize(\n      (state) => selectProfileError(state),\n      (error) => {\n        this.props.dataForm.setProps({\n          error: error ? error.reason : undefined,\n        });\n      },\n    );\n    const memoizePasswordError = memoize(\n      (state) => selectPasswordError(state),\n      (error) => {\n        this.props.passwordForm.setProps({\n          error: error ? error.reason : undefined,\n        });\n      },\n    );\n    Store.subscribe((state) => {\n      memoizeProfileError(state);\n      memoizePasswordError(state);\n    });\n  }\n\n  render() {\n    return profileEditor({\n      title: this.props.title,\n      dataForm: this.props.dataForm,\n      passwordForm: this.props.passwordForm,\n      helper: this.props.helper,\n    });\n  }\n}\n\nexport default ProfileEditor;\n","import Profile from './Profile';\n\nexport default Profile;\n","import Block from '../../utils/Block';\nimport profile from './profile.pug';\nimport Helper from '../../components/Helper';\nimport AuthService from '../../services/AuthService';\nimport ProfileEditor from '../../components/ProfileEditor';\n\nexport default class Profile extends Block {\n  constructor() {\n    super('div', {}, {\n      regForm: new ProfileEditor({\n        title: 'Изменение профиля',\n        helper: new Helper({\n          text: '',\n          onclick: async () => {\n            await AuthService.logout();\n          },\n          textLink: 'Выйти',\n        }),\n      }),\n    });\n  }\n\n  componentDidMount() {\n    document.title = 'Настройки профиля';\n    AuthService.getProfile();\n  }\n\n  render() {\n    return profile({\n      form: this.props.regForm,\n    });\n  }\n}\n","import Reducer from '../../utils/Reducer';\n\nconst popUpReducer: Reducer<{ [index: string]: boolean }> = (\n  state = { chatSetting: false, chatName: false },\n  action,\n) => {\n  switch (action.type) {\n    case 'popUp/SETCHATSETTINGACTIVE':\n      return { ...state, chatSetting: true };\n    case 'popUp/SETCHATSETTINGDISABLE':\n      return { ...state, chatSetting: false };\n    case 'popUp/SETCHATNAMEACTIVE':\n      return { ...state, chatName: true };\n    case 'popUp/SETCHATNAMEDISABLE':\n      return { ...state, chatName: false };\n    case 'popUp/CLOSEALL':\n      return Object.keys(state).reduce((res: { [index: string]: boolean }, key) => ({\n        ...res,\n        [key]: false,\n      }), {});\n    default:\n      return state;\n  }\n};\n\nexport default popUpReducer;\n","import Chat from '../../types/Chat';\nimport Reducer from '../../utils/Reducer';\n\nconst chatsReducer: Reducer<Array<Chat>> = (state = [], action) => {\n  switch (action.type) {\n    case 'chats/SET':\n      return action.payload;\n    case 'chats/SETMEMBERS':\n      return state.map((chat: Chat) => {\n        if (chat.id === action.payload.chatId) {\n          return {\n            ...chat,\n            members: action.payload.members,\n          };\n        }\n        return { ...chat };\n      });\n    case 'chats/ADDNEWMESSAGES':\n      return state.map((chat: Chat) => {\n        if (chat.id === action.payload.chatId) {\n          return {\n            ...chat,\n            messages: chat.messages\n              ? action.payload.messages.concat(chat.messages)\n              : action.payload.messages,\n          };\n        }\n        return { ...chat };\n      });\n    case 'chats/ADDOLDMESSAGES':\n      return state.map((chat: Chat) => {\n        if (chat.id === action.payload.chatId) {\n          return {\n            ...chat,\n            messages: chat.messages\n              ? chat.messages.concat(action.payload.messages)\n              : action.payload.messages,\n          };\n        }\n        return { ...chat };\n      });\n    default:\n      return state;\n  }\n};\n\nexport default chatsReducer;\n","import Reducer from '../../utils/Reducer';\n\nconst currentChatReducer: Reducer<{ id: number | undefined }> = (\n  state = { id: undefined },\n  action,\n) => {\n  switch (action.type) {\n    case 'currentChat/SETACTIVECHATID':\n      return { ...state, activeChatId: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default currentChatReducer;\n","import { User } from '../../types/User';\nimport Reducer from '../../utils/Reducer';\n\nconst searchUsersReducer: Reducer<Array<User>> = (\n  state = [],\n  action,\n) => {\n  switch (action.type) {\n    case 'searchUsers/SETUSERS':\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default searchUsersReducer;\n","import { Profile } from '../../types/User';\nimport Reducer from '../../utils/Reducer';\n\nconst profileReducer: Reducer<Profile | undefined> = (\n  state = undefined,\n  action,\n) => {\n  switch (action.type) {\n    case 'profile/SET':\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default profileReducer;\n","import ApiError from '../../types/ApiError';\nimport Reducer from '../../utils/Reducer';\n\nconst errorsReducer: Reducer<{\n  auth?: ApiError,\n  reg?: ApiError,\n  profile?: ApiError,\n  password?: ApiError,\n}> = (state = {}, action) => {\n  switch (action.type) {\n    case 'errors/SETAUTH':\n      return { ...state, auth: action.payload };\n    case 'errors/SETREG':\n      return { ...state, reg: action.payload };\n    case 'errors/SETPROFILE':\n      return { ...state, profile: action.payload };\n    case 'errors/CLEARPROFILE':\n      return { ...state, profile: undefined };\n    case 'errors/SETPASSWORD':\n      return { ...state, password: action.payload };\n    case 'errors/CLEARPASSWORD':\n      return { ...state, password: undefined };\n\n    default:\n      return state;\n  }\n};\n\nexport default errorsReducer;\n","import Store from '../utils/Store';\nimport popUpReducer from './reducers/popUpReducer';\nimport chatsReducer from './reducers/chatsReducer';\nimport currentChatReducer from './reducers/currentChatReducer';\nimport searchUsersReducer from './reducers/searchUsersReducer';\nimport profileReducer from './reducers/profileReducer';\nimport errorsReducer from './reducers/errorsReducer';\n\nconst createStore = () => {\n  Store\n    .addReducer('popUp', popUpReducer)\n    .addReducer('chats', chatsReducer)\n    .addReducer('currentChat', currentChatReducer)\n    .addReducer('searchUsers', searchUsersReducer)\n    .addReducer('profile', profileReducer)\n    .addReducer('errors', errorsReducer);\n};\n\nexport default createStore;\n","import Reg from './pages/reg/Reg';\nimport Auth from './pages/auth/Auth';\nimport Chat from './pages/chat/Chat';\nimport Profile from './pages/profile';\nimport Router from './utils/Router';\nimport createStore from './store/createStore';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  function render(query: string) {\n    const root = document.querySelector(query) as HTMLElement;\n    if (root === null) {\n      return;\n    }\n    createStore();\n    const router = new Router(root);\n    router\n      .use('/', Chat)\n      .use('/auth/', Auth)\n      .use('/reg/', Reg)\n      .use('/profile/', Profile)\n      .start();\n  }\n  /* let page;\n    const path = window.location.pathname;\n    switch (path) {\n      case '/':\n        page = new Reg();\n        break;\n      case '/reg.html':\n        page = new Reg();\n        break;\n      case '/auth.html':\n        page = new Auth();\n        break;\n      case '/chat.html':\n        page = new Chat();\n        break;\n      case '/profile.html':\n        page = new Profile();\n        break;\n      case '/500.html':\n        page = new Error500();\n        break;\n      default:\n        page = new Error404();\n        break;\n    }\n    root.appendChild(page.element); */\n\n  render('.root');\n});\n"],"names":["$0abc1b7f80d63b52$var$getRandomValues","$deb01af824756a5a$export$40339995e8a21591","$deb01af824756a5a$export$357eb1b4f03c1402","$deb01af824756a5a$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$0abc1b7f80d63b52$var$rnds8","Uint8Array","crypto","getRandomValues","bind","msCrypto","$69d4d65d51ca5f8f$export$9099ad97b570f7c","$c6441e4f719b155b$export$9099ad97b570f7c","uuid","test","$b1e778e22ee8f046$var$byteToHex","$b1e778e22ee8f046$var$i","push","toString","substr","$b1e778e22ee8f046$export$9099ad97b570f7c","arr","offset","arguments","undefined","toLowerCase","TypeError","$7424411fb8c16e07$export$9099ad97b570f7c","options","buf","rnds","random","rng","$0abc1b7f80d63b52$export$9099ad97b570f7c","$96104ac7d6a7bc75$export$9099ad97b570f7c","on","event","callback","this","listeners","off","filter","listener","emit","args","forEach","$79d36ba5d9659614$var$Block","registerEvents","eventBus","EVENTS","INIT","init","FLOW_CDM","componentDidMountIn","FLOW_CDU","componentDidUpdateIn","FLOW_RENDER","renderIn","bindBlockToEvents","events","newEvents","entries","func","e","makePropsProxy","props","Proxy","set","target","prop","val","old","createResources","tagName","meta","elementIn","document","createElement","componentDidMount","renderBlocks","block","fragment","innerHTML","values","reduce","blockProps","value","Array","isArray","every","v","concat","stub","content","querySelector","replaceWith","element","render","removeEvents","removeAttrs","appendChild","addAttrs","addEvents","attrs","attr","setAttribute","removeAttribute","eventName","eventFunc","removeEventListener","addEventListener","oldProps","newProps","componentDidUpdate","setProps","nextProps","assign","_oldProps","_newProps","propsWithThis","$79d36ba5d9659614$export$9099ad97b570f7c","$0db1583c59b90805$export$9099ad97b570f7c","locals","pug_interp","pug_html","pug_mixins","locals_for_with","form","attributes","call","$336341df8e144e01$export$9099ad97b570f7c","$aba368f57717867f$export$9099ad97b570f7c","setClass","baseClass","fullWidth","theme","class","super","click","onclick","$c55d75b8fec49f19$export$9099ad97b570f7c","wrong","fullHeight","placeholder","name","type","validFunc","$f995658af23dd85f$export$9099ad97b570f7c","checkInput","input","checkValidFields","statusFields","fields","field","getFormValues","sum","cur","map","f","blur","_e","comp","focus","button","buttonText","result","valid","submit","$afa879f24bbf15a1$var$pug_match_html","$afa879f24bbf15a1$export$9099ad97b570f7c","error","$$obj","pug_index0","$$l","a","t","exec","r","c","n","s","index","charCodeAt","substring","$afa879f24bbf15a1$var$pug_escape","$93bc135aa69a9f06$export$9099ad97b570f7c","$1095a92824284ab2$var$pug_match_html","$1095a92824284ab2$export$9099ad97b570f7c","helper","title","$1095a92824284ab2$var$pug_escape","$afd0e3fb7dccf244$export$9099ad97b570f7c","$7927daac37378dce$var$pug_match_html","$7927daac37378dce$export$9099ad97b570f7c","link","text","$7927daac37378dce$var$pug_escape","$dd9a06fe0c8394f4$export$9099ad97b570f7c","textLink","$9870b66b07f405b6$export$9099ad97b570f7c","match","pathname","BlockClass","currentRoot","view","$afc538645db1dd8e$var$Router","use","route","routes","start","window","onpopstate","onRoute","location","getRoute","go","history","pushState","back","forward","find","instance","$afc538645db1dd8e$export$9099ad97b570f7c","$ec757c3517e820df$export$9099ad97b570f7c","$b3d140dc30a974b5$var$METHODS","$b3d140dc30a974b5$export$9099ad97b570f7c","get","url","newUrl","startUrl","request","method","put","data","post","delete","Promise","resolve","reject","xhr","XMLHttpRequest","open","headers","setRequestHeader","responseType","onload","status","response","onabort","onerror","timeout","ontimeout","withCredentials","send","stringify","$19bb825ae169abb3$var$authAPIInstance","$19bb825ae169abb3$export$9099ad97b570f7c","login","user","logout","create","$ebdb21e220380007$export$9099ad97b570f7c","payload","$0f4e78cfb06a0f33$export$9099ad97b570f7c","profile","$62af8f8f19b8c5dc$export$9099ad97b570f7c","$751f0ec61d8cb274$export$9099ad97b570f7c","addReducer","reducer","reducers","dispatch","getState","state","action","emitListeners","subscribe","newState","key","$005bbbc309cc419e$export$9099ad97b570f7c","api","err","console","log","$a35dd9f801fdfea3$var$isArrayOrObject","constructor","prototype","$a35dd9f801fdfea3$var$isPlainObject","$a35dd9f801fdfea3$var$isArray","$a35dd9f801fdfea3$export$9099ad97b570f7c","$a35dd9f801fdfea3$var$isEqual","lhs","rhs","rightValue","$1113aaf4340c4e7e$export$9099ad97b570f7c","dataFunc","actionFunc","memo","$4c208feb30ed5b79$export$9099ad97b570f7c","errors","reg","$8b25cf64c14e9365$export$9099ad97b570f7c","checkNotAuth","memoizeErrorMessage","regForm","reason","formObj","$c8072853fa28279f$export$9099ad97b570f7c","$20ff4d4190e3ecdc$export$9099ad97b570f7c","auth","$b34df5f6d1c219c2$export$9099ad97b570f7c","async","$c15e10765727cc04$var$chatsAPIInstance","$c15e10765727cc04$export$9099ad97b570f7c","token","chatId","$b37441bd231a9b13$export$9099ad97b570f7c","$bf8611845910abf6$export$9099ad97b570f7c","$db55be6cf32b7ffe$export$9099ad97b570f7c","chats","$985a19e0506da86b$export$9099ad97b570f7c","chat","$77210f4ecf4e7a61$export$9099ad97b570f7c","messages","$b56a4205e5db5638$export$9099ad97b570f7c","$bdc607a3bc0f8ed4$export$9099ad97b570f7c","currentChat","activeChatId","$6138bb4c947157db$export$9099ad97b570f7c","$82ed2351f4178dbc$export$9099ad97b570f7c","chatsApi","socket","WebSocket","sockets","chat_id","message","$d3b5df36f5dac255$export$9099ad97b570f7c","connect","getlastMessages","$8f22e7bd5070cc69$var$pug_escape","$8f22e7bd5070cc69$var$pug_match_html","$8f22e7bd5070cc69$export$9099ad97b570f7c","author","count","date","img","toJSON","indexOf","replace","$8f22e7bd5070cc69$var$pug_attr","$29624a860cee5eda$export$9099ad97b570f7c","active","memoizeActiveChat","$fa72b022138a50ad$var$pug_escape","$fa72b022138a50ad$var$pug_match_html","$fa72b022138a50ad$export$9099ad97b570f7c","avatar","$fa72b022138a50ad$var$pug_attr","$791913d76b6b190a$export$9099ad97b570f7c","$904589f4246cf852$export$9099ad97b570f7c","addChatButton","chatBar","search","$c19db8cb7cdb1077$export$9099ad97b570f7c","$d39c959e738b00c2$export$9099ad97b570f7c","$57836ae8672551ec$export$9099ad97b570f7c","time","Date","getHours","getMinutes","$305387cc0b9c5f27$export$9099ad97b570f7c","$d13cb43f503c26b6$export$9099ad97b570f7c","startsWith","searchValue","$b9dcc40a1b4c53e1$exports","URL","import","$7cb2375d22c2de9e$export$9099ad97b570f7c","$parcel$interopDefault","$5fe95d10c443fc88$export$9099ad97b570f7c","memoizeSelectChats","lastMessege","last_message","unread_count","memoizeGetProfile","first_name","second_name","$276c085ef2679ec9$export$9099ad97b570f7c","chatList","chatNamePopUp","chatSettingsPopUp","chatWindow","$08605875c4b15bdb$export$9099ad97b570f7c","chatSettingsButton","messagesList","$dfa5d8b7bbdc3d34$export$9099ad97b570f7c","inputMessage","sendButton","$f724fddd53d5529d$export$9099ad97b570f7c","sendMessage","preventDefault","$c7e297e71555e2ef$export$9099ad97b570f7c","activeChat","$a7a2e45237f8ea56$export$9099ad97b570f7c","$08b78f878cc5d8e2$var$pug_escape","$08b78f878cc5d8e2$var$pug_match_html","$08b78f878cc5d8e2$export$9099ad97b570f7c","$524287d6e541855d$export$9099ad97b570f7c","self","$2bcbf9aaf4bf99bd$export$9099ad97b570f7c","memoizeMessages","d","user_id","$b3d1b8fba2e0631a$var$membersAPIInstance","$b3d1b8fba2e0631a$export$9099ad97b570f7c","param","users","userId","$7b55dc5075e460b2$export$9099ad97b570f7c","$a0c72e8d2d417d4d$export$9099ad97b570f7c","$d0d9b14215376712$export$9099ad97b570f7c","openMembersPopUp","members","$16751f0c77b29361$export$9099ad97b570f7c","$c65b312295631d1f$export$9099ad97b570f7c","$c071e94e7dc22846$export$9099ad97b570f7c","$ec94aeb173fa5077$export$9099ad97b570f7c","mousedown","currentTarget","disableFunc","$21626941180b0b72$export$9099ad97b570f7c","$83acd79f0b4129ee$export$9099ad97b570f7c","$fcac86abc3bda4db$export$9099ad97b570f7c","popUp","chatName","$0b4b22424016fb8d$export$9099ad97b570f7c","$b1e70a640e0ced0c$export$9099ad97b570f7c","chatSetting","$b8e4c37076c63350$var$userAPIInstance","$b8e4c37076c63350$export$9099ad97b570f7c","update","updatePassword","pass","$dfdc88cf8d10fa70$export$9099ad97b570f7c","$6321ebaa575466c7$export$9099ad97b570f7c","$1781e230542a1def$export$9099ad97b570f7c","$61cff5489beca920$export$9099ad97b570f7c","$50efa4057f6c8c19$export$9099ad97b570f7c","$11cc176d18dcfb5f$export$9099ad97b570f7c","created_by","$4a1fa7ec8445acdc$export$9099ad97b570f7c","searchUsers","$603a60328fbe574e$export$9099ad97b570f7c","chatRoot","$0caae6e301d24f4d$export$9099ad97b570f7c","membersId","mem","searchMembers","includes","role","$99698568c9e446d0$export$9099ad97b570f7c","$5f009e1507a32539$export$9099ad97b570f7c","$0ccb12f02d7c7256$var$pug_match_html","$0ccb12f02d7c7256$export$9099ad97b570f7c","header","$0ccb12f02d7c7256$var$pug_escape","$c770cb8f9a64aad2$export$9099ad97b570f7c","$007b7f7a52cf0cdb$export$9099ad97b570f7c","root","member","add","$6831f31e0a66f6df$export$9099ad97b570f7c","memoizeSetTitle","memoizeUsers","$6aa913be642c544a$export$9099ad97b570f7c","getProfile","memoizeCreateChat","memoizeChatSetting","$8584168e0a0ba175$export$9099ad97b570f7c","$c8337912908ceff0$export$9099ad97b570f7c","password","$682ad2d1abe5f246$export$9099ad97b570f7c","$3747d0b33424fb33$var$pug_match_html","$3747d0b33424fb33$export$9099ad97b570f7c","dataForm","passwordForm","$3747d0b33424fb33$var$pug_escape","$3d4c1bd842768608$export$9099ad97b570f7c","memoizeProfileError","memoizePasswordError","updateProfile","$c41544155fdfdb68$export$9099ad97b570f7c","$ce62f82472c694a8$export$9099ad97b570f7c","res","$eed142f22361bea7$export$9099ad97b570f7c","$c3851982d0746519$export$9099ad97b570f7c","$c13ce222880dcda5$export$9099ad97b570f7c","$d04cd6216d29ed06$export$9099ad97b570f7c","$bbef99000f08bbef$export$9099ad97b570f7c","$5e1881a33518e209$export$9099ad97b570f7c","query"],"version":3,"file":"auth.0f0d243c.js.map"}